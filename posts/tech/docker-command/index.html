<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>docker | 命令大全 | lvbibir's Blog</title><meta name=keywords content="docker"><meta name=description content="docker info&mdash;&ndash;查看docker的各项信息 查看docke的各项操作，包括docker版本、容器数量、镜像数量、仓库地址"><meta name=author content="
作者:&nbsp;lvbibir"><link rel=canonical href=https://www.lvbibir.cn/posts/tech/docker-command/><link crossorigin=anonymous href=/assets/css/stylesheet.173f711a8207f2b12c65ecad1b60d5d1685ab6fafbdca14943f497747a8daa4c.css integrity="sha256-Fz9xGoIH8rEsZeytG2DV0Whatvr73KFJQ/SXdHqNqkw=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.lvbibir.cn/img/avatar.gif><link rel=icon type=image/png sizes=16x16 href=https://www.lvbibir.cn/img/avatar.gif><link rel=icon type=image/png sizes=32x32 href=https://www.lvbibir.cn/img/avatar.gif><link rel=apple-touch-icon href=https://www.lvbibir.cn/img/avatar.gif><link rel=mask-icon href=https://www.lvbibir.cn/img/avatar.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script src=https://kit.fontawesome.com/2e34783cd8.js crossorigin=anonymous></script><meta property="og:title" content="docker | 命令大全"><meta property="og:description" content="docker info&mdash;&ndash;查看docker的各项信息 查看docke的各项操作，包括docker版本、容器数量、镜像数量、仓库地址"><meta property="og:type" content="article"><meta property="og:url" content="https://www.lvbibir.cn/posts/tech/docker-command/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-08-01T00:00:00+00:00"><meta property="article:modified_time" content="2019-08-01T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="docker | 命令大全"><meta name=twitter:description content="docker info&mdash;&ndash;查看docker的各项信息 查看docke的各项操作，包括docker版本、容器数量、镜像数量、仓库地址"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"📚文章","item":"https://www.lvbibir.cn/posts/"},{"@type":"ListItem","position":3,"name":"👨🏻‍💻 技术","item":"https://www.lvbibir.cn/posts/tech/"},{"@type":"ListItem","position":4,"name":"docker | 命令大全","item":"https://www.lvbibir.cn/posts/tech/docker-command/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"docker | 命令大全","name":"docker | 命令大全","description":"docker info\u0026mdash;\u0026ndash;查看docker的各项信息 查看docke的各项操作，包括docker版本、容器数量、镜像数量、仓库地址","keywords":["docker"],"articleBody":"docker info—–查看docker的各项信息 查看docke的各项操作，包括docker版本、容器数量、镜像数量、仓库地址、镜像存放位置等 容器操作 docker run————–创建并启动一个新的容器 docker run ：创建一个新的容器并运行一个命令 语法\ndocker run [OPTIONS] IMAGE [COMMAND] [ARG…]\nOPTIONS说明：\n-a stdin: 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项； -d: 后台运行容器，并返回容器ID； -i: 以交互模式运行容器，通常与 -t 同时使用； -P: 随机端口映射，容器内部端口随机映射到主机的高端口 -p: 指定端口映射，格式为：主机(宿主)端口:容器端口 1. 只指定容器端口（宿主机端口随机映射） docker run -p 80 -it ubuntu /bin/bash 2. 主机端口：容器端口 docker run -p 8080:80 -it ubuntu /bin/bash 3. IP：容器端口 docker run -p 0.0.0.0:80 -it ubuntu /bin/bash 4. IP：端口：容器端口 dokcer run -p 0.0.0.0:8080:80 -it ubuntu /bin/bash -t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用； --name=\"nginx-lb\": 为容器指定一个名称； --dns 8.8.8.8: 指定容器使用的DNS服务器，默认和宿主一致； --dns-search example.com: 指定容器DNS搜索域名，默认和宿主一致； -h \"mars\": 指定容器的hostname； -e username=\"ritchie\": 设置环境变量； -env-file=[]: 从指定文件读入环境变量； --cpuset=\"0-2\" or --cpuset=\"0,1,2\": 绑定容器到指定CPU运行； -m :设置容器使用内存最大值； --net=\"bridge\": 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型； --link=[]: 添加链接到另一个容器； --expose=[]: 开放一个端口或一组端口； --volume , -v: 绑定一个卷 实例\n使用docker镜像nginx:latest以后台模式启动一个容器,并将容器命名为mynginx。\ndocker run --name mynginx -d nginx:latest 使用镜像nginx:latest以后台模式启动一个容器,并将容器的80端口映射到主机随机端口。\ndocker run -P -d nginx:latest 使用镜像 nginx:latest，以后台模式启动一个容器,将容器的 80 端口映射到主机的 80 端口,主机的目录 /data 映射到容器的 /data。\ndocker run -p 80:80 -v /data:/data -d nginx:latest 绑定容器的 8080 端口，并将其映射到本地主机 127.0.0.1 的 80 端口上。\ndocker run -p 127.0.0.1:80:8080/tcp ubuntu bash 使用镜像nginx:latest以交互模式启动一个容器,在容器内执行/bin/bash命令。\nrunoob@runoob:~$ docker run -it nginx:latest /bin/bash root@b8573233d675:/# docker ps———-查看容器 docker ps : 列出容器 语法\ndocker ps [OPTIONS]\nOPTIONS说明：\n-a :显示所有的容器，包括未运行的。 -f :根据条件过滤显示的内容。 --format :指定返回值的模板文件。 -l :显示最近创建的容器。 -n :列出最近创建的n个容器。 --no-trunc :不截断输出。 -q :静默模式，只显示容器编号。 -s :显示总的文件大小。 实例\n列出所有在运行的容器信息。\nrunoob@runoob:~$ docker ps CONTAINER ID IMAGE COMMAND ... PORTS NAMES 09b93464c2f7 nginx:latest \"nginx -g 'daemon off\" ... 80/tcp, 443/tcp myrunoob 96f7f14e99ab mysql:5.6 \"docker-entrypoint.sh\" ... 0.0.0.0:3306-\u003e3306/tcp mymysql 列出最近创建的5个容器信息。\nrunoob@runoob:~$ docker ps -n 5 CONTAINER ID IMAGE COMMAND CREATED 09b93464c2f7 nginx:latest \"nginx -g 'daemon off\" 2 days ago ... b8573233d675 nginx:latest \"/bin/bash\" 2 days ago ... b1a0703e41e7 nginx:latest \"nginx -g 'daemon off\" 2 days ago ... f46fb1dec520 5c6e1090e771 \"/bin/sh -c 'set -x \\t\" 2 days ago ... a63b4a5597de 860c279d2fec \"bash\" 2 days ago ... 列出所有创建的容器ID。\nrunoob@runoob:~$ docker ps -a -q 09b93464c2f7 b8573233d675 b1a0703e41e7 f46fb1dec520 a63b4a5597de 6a4aa42e947b de7bb36e7968 43a432b73776 664a8ab1a585 ba52eb632bbd docker inspect————查看某个容器的详细信息 docker inspect : 获取容器/镜像的元数据。 语法\ndocker inspect [OPTIONS] NAME|ID [NAME|ID…]\nOPTIONS说明：\n-f :指定返回值的模板文件。 -s :显示总的文件大小。 --type :为指定类型返回JSON。 实例\n获取镜像mysql:5.6的元信息。\nrunoob@runoob:~$ docker inspect mysql:5.6 [ { \"Id\": \"sha256:2c0964ec182ae9a045f866bbc2553087f6e42bfc16074a74fb820af235f070ec\", \"RepoTags\": [ \"mysql:5.6\" ], \"RepoDigests\": [], \"Parent\": \"\", \"Comment\": \"\", \"Created\": \"2016-05-24T04:01:41.168371815Z\", \"Container\": \"e0924bc460ff97787f34610115e9363e6363b30b8efa406e28eb495ab199ca54\", \"ContainerConfig\": { \"Hostname\": \"b0cf605c7757\", \"Domainname\": \"\", \"User\": \"\", \"AttachStdin\": false, \"AttachStdout\": false, \"AttachStderr\": false, \"ExposedPorts\": { \"3306/tcp\": {} }, ... 获取正在运行的容器mymysql的 IP。\ndocker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' mymysql 获取所有容器的ip地址\ndocker inspect --format='{{.Name}} - {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' $(docker ps -aq) doker start/stop/restart——开启、关闭、重启一个容器 docker start :启动一个或多个已经被停止的容器\ndocker stop :停止一个运行中的容器\ndocker restart :重启容器\n语法\ndocker start [OPTIONS] CONTAINER [CONTAINER…]\ndocker stop [OPTIONS] CONTAINER [CONTAINER…]\ndocker restart [OPTIONS] CONTAINER [CONTAINER…]\n实例\n启动已被停止的容器myrunoob\ndocker start myrunoob 停止运行中的容器myrunoob\ndocker stop myrunoob 重启容器myrunoob\ndocker restart myrunoob docker rm————–删除一个已经停止的容器容器 docker rm ：删除一个或多少容器 语法\ndocker rm [OPTIONS] CONTAINER [CONTAINER…]\nOPTIONS说明：\n-f :通过SIGKILL信号强制删除一个运行中的容器 -l :移除容器间的网络连接，而非容器本身 -v :-v 删除与容器关联的卷 实例\n强制删除容器db01、db02\ndocker rm -f db01 db02 移除容器nginx01对容器db01的连接，连接名db\ndocker rm -l db 删除容器nginx01,并删除容器挂载的数据卷\ndocker rm -v nginx01 docker attach——进入一个开启的容器中 docker attach :连接到正在运行中的容器。\n语法\ndocker attach [OPTIONS] CONTAINER\n要attach上去的容器必须正在运行，可以同时连接上同一个container来共享屏幕（与screen命令的attach类似）。\n官方文档中说attach后可以通过CTRL-C来detach，但实际上经过我的测试，如果container当前在运行bash，CTRL-C自然是当前行的输入，没有退出；如果container当前正在前台运行进程，如输出nginx的access.log日志，CTRL-C不仅会导致退出容器，而且还stop了。这不是我们想要的，detach的意思按理应该是脱离容器终端，但容器依然运行。好在attach是可以带上–sig-proxy=false来确保CTRL-D或CTRL-C不会关闭容器。 实例\n容器mynginx将访问日志指到标准输出，连接到容器查看访问信息。\nrunoob@runoob:~$ docker attach --sig-proxy=false mynginx 192.168.239.1 - - [10/Jul/2016:16:54:26 +0000] \"GET / HTTP/1.1\" 304 0 \"-\" \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36\" \"-\" docker logs—–查看容器日志 docker logs : 获取容器的日志 语法\ndocker logs [OPTIONS] CONTAINER\nOPTIONS说明：\n-f : 跟踪日志输出 --since :显示某个开始时间的所有日志 -t : 显示时间戳 --tail :仅列出最新N条容器日志 实例\n跟踪查看容器mynginx的日志输出。\nrunoob@runoob:~$ docker logs -f mynginx 192.168.239.1 - - [10/Jul/2016:16:53:33 +0000] \"GET / HTTP/1.1\" 200 612 \"-\" \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36\" \"-\" 2016/07/10 16:53:33 [error] 5#5: *1 open() \"/usr/share/nginx/html/favicon.ico\" failed (2: No such file or directory), client: 192.168.239.1, server: localhost, request: \"GET /favicon.ico HTTP/1.1\", host: \"192.168.239.130\", referrer: \"http://192.168.239.130/\" 192.168.239.1 - - [10/Jul/2016:16:53:33 +0000] \"GET /favicon.ico HTTP/1.1\" 404 571 \"http://192.168.239.130/\" \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36\" \"-\" 192.168.239.1 - - [10/Jul/2016:16:53:59 +0000] \"GET / HTTP/1.1\" 304 0 \"-\" \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36\" \"-\" ... 查看容器mynginx从2016年7月1日后的最新10条日志。\ndocker logs --since=\"2016-07-01\" --tail=10 mynginx docker top—–查看容器内的进程 docker top :查看容器中运行的进程信息，支持 ps 命令参数。 语法\ndocker top [OPTIONS] CONTAINER [ps OPTIONS]\n容器运行时不一定有/bin/bash终端来交互执行top命令，而且容器还不一定有top命令，可以使用docker top来实现查看container中正在运行的进程。 实例\n查看容器mymysql的进程信息。\nrunoob@runoob:~/mysql$ docker top mymysql UID PID PPID C STIME TTY TIME CMD 999 40347 40331 18 00:58 ? 00:00:02 mysqld 查看所有运行容器的进程信息。\nfor i in `docker ps |grep Up|awk '{print $1}'`;do echo \\ \u0026\u0026docker top $i; done docker exec——在容器中启动新的进程 docker exec ：在运行的容器中执行命令 语法\ndocker exec [OPTIONS] CONTAINER COMMAND [ARG…]\nOPTIONS说明：\n-d :分离模式: 在后台运行 -i :即使没有附加也保持STDIN 打开 -t :分配一个伪终端 实例\n在容器 mynginx 中以交互模式执行容器内 /root/runoob.sh 脚本:\nrunoob@runoob:~$ docker exec -it mynginx /bin/sh /root/runoob.sh http://www.runoob.com/ 在容器 mynginx 中开启一个交互模式的终端:\nrunoob@runoob:~$ docker exec -i -t mynginx /bin/bash root@b1a0703e41e7:/# 也可以通过 docker ps -a 命令查看已经在运行的容器，然后使用容器 ID 进入容器。\n查看已经在运行的容器 ID：\ndocker ps -a ... 9df70f9a0714 openjdk \"/usercode/script.sh…\" ... 第一列的 9df70f9a0714 就是容器 ID。\n通过 exec 命令对指定的容器执行 bash:\ndocker exec -it 9df70f9a0714 /bin/bash dokcer kill—–停止容器 docker kill :杀掉一个运行中的容器。 语法\ndocker kill [OPTIONS] CONTAINER [CONTAINER…]\nOPTIONS说明：\n-s :向容器发送一个信号 实例\n杀掉运行中的容器mynginx\nrunoob@runoob:~$ docker kill -s KILL mynginx mynginx 镜像操作 docker images——-查看镜像 docker images : 列出本地镜像。 语法\ndocker images [OPTIONS] [REPOSITORY[:TAG]]\nOPTIONS说明：\n-a :列出本地所有的镜像（含中间映像层，默认情况下，过滤掉中间映像层）； --digests :显示镜像的摘要信息； -f :显示满足条件的镜像； --format :指定返回值的模板文件； --no-trunc :显示完整的镜像信息； -q :只显示镜像ID。 实例\n查看本地镜像列表。\nrunoob@runoob:~$ docker images REPOSITORY TAG IMAGE ID CREATED SIZE mymysql v1 37af1236adef 5 minutes ago 329 MB runoob/ubuntu v4 1c06aa18edee 2 days ago 142.1 MB 5c6e1090e771 2 days ago 165.9 MB httpd latest ed38aaffef30 11 days ago 195.1 MB alpine latest 4e38e38c8ce0 2 weeks ago 4.799 MB mongo 3.2 282fd552add6 3 weeks ago 336.1 MB redis latest 4465e4bcad80 3 weeks ago 185.7 MB php 5.6-fpm 025041cd3aa5 3 weeks ago 456.3 MB python 3.5 045767ddf24a 3 weeks ago 684.1 MB ... 列出本地镜像中REPOSITORY为ubuntu的镜像列表。\nroot@runoob:~# docker images ubuntu REPOSITORY TAG IMAGE ID CREATED SIZE ubuntu 14.04 90d5884b1ee0 9 weeks ago 188 MB ubuntu 15.10 4e3b13c8a266 3 months ago 136.3 MB docker inspect——-查看镜像或者容器的详细信息 docker inspect : 获取容器/镜像的元数据。 语法\ndocker inspect [OPTIONS] NAME|ID [NAME|ID…]\nOPTIONS说明：\n-f :指定返回值的模板文件。 -s :显示总的文件大小。 --type :为指定类型返回JSON。 实例\n获取镜像mysql:5.6的元信息。\nrunoob@runoob:~$ docker inspect mysql:5.6 [ { \"Id\": \"sha256:2c0964ec182ae9a045f866bbc2553087f6e42bfc16074a74fb820af235f070ec\", \"RepoTags\": [ \"mysql:5.6\" ], \"RepoDigests\": [], \"Parent\": \"\", \"Comment\": \"\", \"Created\": \"2016-05-24T04:01:41.168371815Z\", \"Container\": \"e0924bc460ff97787f34610115e9363e6363b30b8efa406e28eb495ab199ca54\", \"ContainerConfig\": { \"Hostname\": \"b0cf605c7757\", \"Domainname\": \"\", \"User\": \"\", \"AttachStdin\": false, \"AttachStdout\": false, \"AttachStderr\": false, \"ExposedPorts\": { \"3306/tcp\": {} }, ... 获取正在运行的容器mymysql的 IP。\nrunoob@runoob:~$ docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' mymysql 172.17.0.3 docker rmi——删除镜像 docker rmi : 删除本地一个或多少镜像。 语法\ndocker rmi [OPTIONS] IMAGE [IMAGE…]\nOPTIONS说明：\n-f :强制删除； --no-prune :不移除该镜像的过程镜像，默认移除； 注：IMAGE可以使用[仓库：标签]的格式，也可以使用镜像ID，可以同时删除多个镜像 1、使用[仓库：标签]的格式：删除一个标签。当一个镜像文件有多个标签时，删除完所有的标签，镜像文件也随之删除 2、使用镜像ID的格式：先将该镜像文件的所有标签删除，再删除镜像文件\n删除所有镜像\ndocker rmi $(docker images -q) 删除某个仓库的所有镜像\ndocker rmi $(docker images -q ubuntu) 实例\n强制删除本地镜像 runoob/ubuntu:v4。\nroot@runoob:~# docker rmi -f runoob/ubuntu:v4 Untagged: runoob/ubuntu:v4 Deleted: sha256:1c06aa18edee44230f93a90a7d88139235de12cd4c089d41eed8419b503072be Deleted: sha256:85feb446e89a28d58ee7d80ea5ce367eebb7cec70f0ec18aa4faa874cbd97c73 docker search———查找镜像 语法\ndocker search [OPTIONS] TERM\nOPTIONS说明：\n--automated :只列出 automated build类型的镜像； --no-trunc :显示完整的镜像描述； -s :列出收藏数不小于指定值的镜像。 实例\n从Docker Hub查找所有镜像名包含java，并且收藏数大于10的镜像\nrunoob@runoob:~$ docker search -s 10 java NAME DESCRIPTION STARS OFFICIAL AUTOMATED java Java is a concurrent, class-based... 1037 [OK] anapsix/alpine-java Oracle Java 8 (and 7) with GLIBC ... 115 [OK] develar/java 46 [OK] isuper/java-oracle This repository contains all java... 38 [OK] lwieske/java-8 Oracle Java 8 Container - Full + ... 27 [OK] nimmis/java-centos This is docker images of CentOS 7... 13 [OK] docker pull—–拉取镜像 docker pull [OPTIONS] NAME[:TAG|@DIGEST]\nOPTIONS说明：\n-a :拉取所有 tagged 镜像 --disable-content-trust :忽略镜像的校验,默认开启 实例\n从Docker Hub下载java最新版镜像。\ndocker pull java 从Docker Hub下载REPOSITORY为java的所有镜像。\ndocker pull -a java docker push—-推送镜像 docker push : 将本地的镜像上传到镜像仓库,要先登陆到镜像仓库 语法\ndocker push [OPTIONS] NAME[:TAG]\nOPTIONS说明：\n--disable-content-trust :忽略镜像的校验,默认开启 实例\n上传本地镜像myapache:v1到镜像仓库中。\ndocker push myapache:v1 docker commit—–通过容器构建镜像 docker commit :从容器创建一个新的镜像。 语法\ndocker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]\nOPTIONS说明：\n-a :提交的镜像作者； -c :使用Dockerfile指令来创建镜像； -m :提交时的说明文字； -p :在commit时，将容器暂停。 实例\n将容器a404c6c174a2 保存为新的镜像,并添加提交人信息和说明信息。\nrunoob@runoob:~$ docker commit -a \"runoob.com\" -m \"my apache\" a404c6c174a2 mymysql:v1 sha256:37af1236adef1544e8886be23010b66577647a40bc02c0885a6600b33ee28057 runoob@runoob:~$ docker images mymysql:v1 REPOSITORY TAG IMAGE ID CREATED SIZE mymysql v1 37af1236adef 15 seconds ago 329 MB docker build——通过Dockerfile构建镜像 docker build 命令用于使用 Dockerfile 创建镜像。 语法\ndocker build [OPTIONS] PATH | URL | -\nOPTIONS说明：\n--build-arg=[] :设置镜像创建时的变量； --cpu-shares :设置 cpu 使用权重； --cpu-period :限制 CPU CFS周期； --cpu-quota :限制 CPU CFS配额； --cpuset-cpus :指定使用的CPU id； --cpuset-mems :指定使用的内存 id； --disable-content-trust :忽略校验，默认开启； -f :指定要使用的Dockerfile路径； --force-rm :设置镜像过程中删除中间容器； --isolation :使用容器隔离技术； --label=[] :设置镜像使用的元数据； -m :设置内存最大值； --memory-swap :设置Swap的最大值为内存+swap，\"-1\"表示不限swap； --no-cache :创建镜像的过程不使用缓存； --pull :尝试去更新镜像的新版本； --quiet, -q :安静模式，成功后只输出镜像 ID； --rm :设置镜像成功后删除中间容器； --shm-size :设置/dev/shm的大小，默认值是64M； --ulimit :Ulimit配置。 --tag, -t: 镜像的名字及标签，通常 name:tag 或者 name 格式；可以在一次构建中为一个镜像设置多个标签。 --network: 默认 default。在构建期间设置RUN指令的网络模式 实例\n使用当前目录的 Dockerfile 创建镜像，标签为 runoob/ubuntu:v1。\ndocker build -t runoob/ubuntu:v1 . 使用URL github.com/creack/docker-firefox 的 Dockerfile 创建镜像。\ndocker build github.com/creack/docker-firefox 也可以通过 -f Dockerfile 文件的位置：\n$ docker build -f /path/to/a/Dockerfile . 在 Docker 守护进程执行 Dockerfile 中的指令前，首先会对 Dockerfile 进行语法检查，有语法错误时会返回：\n$ docker build -t test/myapp . Sending build context to Docker daemon 2.048 kB Error response from daemon: Unknown instruction: RUNCMD ","wordCount":"4901","inLanguage":"en","datePublished":"2019-08-01T00:00:00Z","dateModified":"2019-08-01T00:00:00Z","author":[{"@type":"Person","name":"lvbibir"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.lvbibir.cn/posts/tech/docker-command/"},"publisher":{"@type":"Organization","name":"lvbibir's Blog","logo":{"@type":"ImageObject","url":"https://www.lvbibir.cn/img/avatar.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.lvbibir.cn accesskey=h title="lvbibir's Blog (Alt + H)"><img src=https://www.lvbibir.cn/img/avatar.gif alt aria-label=logo height=35>lvbibir's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.lvbibir.cn/search title="🔍 搜索 (Alt + /)" accesskey=/><span>🔍 搜索</span></a></li><li><a href=https://www.lvbibir.cn/ title="🏠 主页"><span>🏠 主页</span></a></li><li><a href=https://www.lvbibir.cn/posts title="📚 文章"><span>📚 文章</span></a></li><li><a href=https://www.lvbibir.cn/tags title="🧩 标签"><span>🧩 标签</span></a></li><li><a href=https://www.lvbibir.cn/archives/ title="⏱ 时间轴"><span>⏱ 时间轴</span></a></li><li><a href=https://www.lvbibir.cn/about title="🙋🏻‍♂️ 关于"><span>🙋🏻‍♂️ 关于</span></a></li><li><a href=https://www.lvbibir.cn/links title="🤝 友链"><span>🤝 友链</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://www.lvbibir.cn>主页</a>&nbsp;»&nbsp;<a href=https://www.lvbibir.cn/posts/>📚文章</a>&nbsp;»&nbsp;<a href=https://www.lvbibir.cn/posts/tech/>👨🏻‍💻 技术</a></div><h1 class=post-title>docker | 命令大全</h1><div class=post-meta>创建:&nbsp;<span title='2019-08-01 00:00:00 +0000 UTC'>2019-08-01</span>&nbsp;|&nbsp;更新:&nbsp;2019-08-01&nbsp;|&nbsp;字数:&nbsp;4901字&nbsp;|&nbsp;时长:&nbsp;10分钟&nbsp;|&nbsp;
作者:&nbsp;lvbibir
&nbsp;|&nbsp;标签: &nbsp;<ul class=post-tags-meta><a href=https://www.lvbibir.cn/tags/docker/>docker</a></ul><span id=busuanzi_container_page_pv>&nbsp;| 访问: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>文章目录</span></summary><div class=inner><ul><li><a href=#docker-info-----%e6%9f%a5%e7%9c%8bdocker%e7%9a%84%e5%90%84%e9%a1%b9%e4%bf%a1%e6%81%af aria-label="docker info&amp;mdash;&amp;ndash;查看docker的各项信息">docker info&mdash;&ndash;查看docker的各项信息</a></li><li><a href=#%e5%ae%b9%e5%99%a8%e6%93%8d%e4%bd%9c aria-label=容器操作>容器操作</a><ul><li><a href=#docker-run--------------%e5%88%9b%e5%bb%ba%e5%b9%b6%e5%90%af%e5%8a%a8%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e5%ae%b9%e5%99%a8 aria-label="docker run&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;创建并启动一个新的容器">docker run&mdash;&mdash;&mdash;&mdash;&ndash;创建并启动一个新的容器</a></li><li><a href=#docker-ps----------%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8 aria-label="docker ps&amp;mdash;&amp;mdash;&amp;mdash;-查看容器">docker ps&mdash;&mdash;&mdash;-查看容器</a></li><li><a href=#docker-inspect------------%e6%9f%a5%e7%9c%8b%e6%9f%90%e4%b8%aa%e5%ae%b9%e5%99%a8%e7%9a%84%e8%af%a6%e7%bb%86%e4%bf%a1%e6%81%af aria-label="docker inspect&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;查看某个容器的详细信息">docker inspect&mdash;&mdash;&mdash;&mdash;查看某个容器的详细信息</a></li><li><a href=#doker-startstoprestart------%e5%bc%80%e5%90%af%e5%85%b3%e9%97%ad%e9%87%8d%e5%90%af%e4%b8%80%e4%b8%aa%e5%ae%b9%e5%99%a8 aria-label="doker start/stop/restart&amp;mdash;&amp;mdash;开启、关闭、重启一个容器">doker start/stop/restart&mdash;&mdash;开启、关闭、重启一个容器</a></li><li><a href=#docker-rm--------------%e5%88%a0%e9%99%a4%e4%b8%80%e4%b8%aa%e5%b7%b2%e7%bb%8f%e5%81%9c%e6%ad%a2%e7%9a%84%e5%ae%b9%e5%99%a8%e5%ae%b9%e5%99%a8 aria-label="docker rm&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;删除一个已经停止的容器容器">docker rm&mdash;&mdash;&mdash;&mdash;&ndash;删除一个已经停止的容器容器</a></li><li><a href=#docker-attach------%e8%bf%9b%e5%85%a5%e4%b8%80%e4%b8%aa%e5%bc%80%e5%90%af%e7%9a%84%e5%ae%b9%e5%99%a8%e4%b8%ad aria-label="docker attach&amp;mdash;&amp;mdash;进入一个开启的容器中">docker attach&mdash;&mdash;进入一个开启的容器中</a></li><li><a href=#docker-logs-----%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e6%97%a5%e5%bf%97 aria-label="docker logs&amp;mdash;&amp;ndash;查看容器日志">docker logs&mdash;&ndash;查看容器日志</a></li><li><a href=#docker-top-----%e6%9f%a5%e7%9c%8b%e5%ae%b9%e5%99%a8%e5%86%85%e7%9a%84%e8%bf%9b%e7%a8%8b aria-label="docker top&amp;mdash;&amp;ndash;查看容器内的进程">docker top&mdash;&ndash;查看容器内的进程</a></li><li><a href=#docker-exec------%e5%9c%a8%e5%ae%b9%e5%99%a8%e4%b8%ad%e5%90%af%e5%8a%a8%e6%96%b0%e7%9a%84%e8%bf%9b%e7%a8%8b aria-label="docker exec&amp;mdash;&amp;mdash;在容器中启动新的进程">docker exec&mdash;&mdash;在容器中启动新的进程</a></li><li><a href=#dokcer-kill-----%e5%81%9c%e6%ad%a2%e5%ae%b9%e5%99%a8 aria-label="dokcer kill&amp;mdash;&amp;ndash;停止容器">dokcer kill&mdash;&ndash;停止容器</a></li></ul></li><li><a href=#%e9%95%9c%e5%83%8f%e6%93%8d%e4%bd%9c aria-label=镜像操作>镜像操作</a><ul><li><a href=#docker-images-------%e6%9f%a5%e7%9c%8b%e9%95%9c%e5%83%8f aria-label="docker images&amp;mdash;&amp;mdash;-查看镜像">docker images&mdash;&mdash;-查看镜像</a></li><li><a href=#docker-inspect-------%e6%9f%a5%e7%9c%8b%e9%95%9c%e5%83%8f%e6%88%96%e8%80%85%e5%ae%b9%e5%99%a8%e7%9a%84%e8%af%a6%e7%bb%86%e4%bf%a1%e6%81%af aria-label="docker inspect&amp;mdash;&amp;mdash;-查看镜像或者容器的详细信息">docker inspect&mdash;&mdash;-查看镜像或者容器的详细信息</a></li><li><a href=#docker-rmi------%e5%88%a0%e9%99%a4%e9%95%9c%e5%83%8f aria-label="docker rmi&amp;mdash;&amp;mdash;删除镜像">docker rmi&mdash;&mdash;删除镜像</a></li><li><a href=#docker-search---------%e6%9f%a5%e6%89%be%e9%95%9c%e5%83%8f aria-label="docker search&amp;mdash;&amp;mdash;&amp;mdash;查找镜像">docker search&mdash;&mdash;&mdash;查找镜像</a></li><li><a href=#docker-pull-----%e6%8b%89%e5%8f%96%e9%95%9c%e5%83%8f aria-label="docker pull&amp;mdash;&amp;ndash;拉取镜像">docker pull&mdash;&ndash;拉取镜像</a></li><li><a href=#docker-push----%e6%8e%a8%e9%80%81%e9%95%9c%e5%83%8f aria-label="docker push&amp;mdash;-推送镜像">docker push&mdash;-推送镜像</a></li><li><a href=#docker-commit-----%e9%80%9a%e8%bf%87%e5%ae%b9%e5%99%a8%e6%9e%84%e5%bb%ba%e9%95%9c%e5%83%8f aria-label="docker commit&amp;mdash;&amp;ndash;通过容器构建镜像">docker commit&mdash;&ndash;通过容器构建镜像</a></li><li><a href=#docker-build------%e9%80%9a%e8%bf%87dockerfile%e6%9e%84%e5%bb%ba%e9%95%9c%e5%83%8f aria-label="docker build&amp;mdash;&amp;mdash;通过Dockerfile构建镜像">docker build&mdash;&mdash;通过Dockerfile构建镜像</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=docker-info-----查看docker的各项信息>docker info&mdash;&ndash;查看docker的各项信息<a hidden class=anchor aria-hidden=true href=#docker-info-----查看docker的各项信息>#</a></h1><p>查看docke的各项操作，包括docker版本、容器数量、镜像数量、仓库地址、镜像存放位置等
<img loading=lazy src=https://image.lvbibir.cn/blog/20190805132709466.png alt=在这里插入图片描述></p><h1 id=容器操作>容器操作<a hidden class=anchor aria-hidden=true href=#容器操作>#</a></h1><h2 id=docker-run--------------创建并启动一个新的容器>docker run&mdash;&mdash;&mdash;&mdash;&ndash;创建并启动一个新的容器<a hidden class=anchor aria-hidden=true href=#docker-run--------------创建并启动一个新的容器>#</a></h2><p>docker run ：创建一个新的容器并运行一个命令
语法</p><p>docker run [OPTIONS] IMAGE [COMMAND] [ARG&mldr;]</p><p>OPTIONS说明：</p><pre><code>-a stdin: 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项；

-d: 后台运行容器，并返回容器ID；

-i: 以交互模式运行容器，通常与 -t 同时使用；

-P: 随机端口映射，容器内部端口随机映射到主机的高端口

-p: 指定端口映射，格式为：主机(宿主)端口:容器端口

1. 只指定容器端口（宿主机端口随机映射）
docker run -p 80 -it ubuntu /bin/bash
2. 主机端口：容器端口
docker run -p 8080:80 -it ubuntu /bin/bash
3. IP：容器端口
docker run -p 0.0.0.0:80 -it ubuntu /bin/bash
4. IP：端口：容器端口
dokcer run -p 0.0.0.0:8080:80 -it ubuntu /bin/bash
 
-t: 为容器重新分配一个伪输入终端，通常与 -i 同时使用；

--name=&quot;nginx-lb&quot;: 为容器指定一个名称；

--dns 8.8.8.8: 指定容器使用的DNS服务器，默认和宿主一致；

--dns-search example.com: 指定容器DNS搜索域名，默认和宿主一致；

-h &quot;mars&quot;: 指定容器的hostname；

-e username=&quot;ritchie&quot;: 设置环境变量；

-env-file=[]: 从指定文件读入环境变量；

--cpuset=&quot;0-2&quot; or --cpuset=&quot;0,1,2&quot;: 绑定容器到指定CPU运行；

-m :设置容器使用内存最大值；

--net=&quot;bridge&quot;: 指定容器的网络连接类型，支持 bridge/host/none/container: 四种类型；

--link=[]: 添加链接到另一个容器；

--expose=[]: 开放一个端口或一组端口；

--volume , -v: 绑定一个卷
</code></pre><p>实例</p><p>使用docker镜像nginx:latest以后台模式启动一个容器,并将容器命名为mynginx。</p><pre><code>docker run --name mynginx -d nginx:latest
</code></pre><p>使用镜像nginx:latest以后台模式启动一个容器,并将容器的80端口映射到主机随机端口。</p><pre><code>docker run -P -d nginx:latest
</code></pre><p>使用镜像 nginx:latest，以后台模式启动一个容器,将容器的 80 端口映射到主机的 80 端口,主机的目录 /data 映射到容器的 /data。</p><pre><code>docker run -p 80:80 -v /data:/data -d nginx:latest
</code></pre><p>绑定容器的 8080 端口，并将其映射到本地主机 127.0.0.1 的 80 端口上。</p><pre><code>docker run -p 127.0.0.1:80:8080/tcp ubuntu bash
</code></pre><p>使用镜像nginx:latest以交互模式启动一个容器,在容器内执行/bin/bash命令。</p><pre><code>runoob@runoob:~$ docker run -it nginx:latest /bin/bash
root@b8573233d675:/# 
</code></pre><h2 id=docker-ps----------查看容器>docker ps&mdash;&mdash;&mdash;-查看容器<a hidden class=anchor aria-hidden=true href=#docker-ps----------查看容器>#</a></h2><p>docker ps : 列出容器
语法</p><p>docker ps [OPTIONS]</p><p>OPTIONS说明：</p><pre><code>-a :显示所有的容器，包括未运行的。

-f :根据条件过滤显示的内容。

--format :指定返回值的模板文件。

-l :显示最近创建的容器。

-n :列出最近创建的n个容器。

--no-trunc :不截断输出。

-q :静默模式，只显示容器编号。

-s :显示总的文件大小。
</code></pre><p>实例</p><p>列出所有在运行的容器信息。</p><pre><code>runoob@runoob:~$ docker ps
CONTAINER ID   IMAGE          COMMAND                ...  PORTS                    NAMES
09b93464c2f7   nginx:latest   &quot;nginx -g 'daemon off&quot; ...  80/tcp, 443/tcp          myrunoob
96f7f14e99ab   mysql:5.6      &quot;docker-entrypoint.sh&quot; ...  0.0.0.0:3306-&gt;3306/tcp   mymysql
</code></pre><p>列出最近创建的5个容器信息。</p><pre><code>runoob@runoob:~$ docker ps -n 5
CONTAINER ID        IMAGE               COMMAND                   CREATED           
09b93464c2f7        nginx:latest        &quot;nginx -g 'daemon off&quot;    2 days ago   ...     
b8573233d675        nginx:latest        &quot;/bin/bash&quot;               2 days ago   ...     
b1a0703e41e7        nginx:latest        &quot;nginx -g 'daemon off&quot;    2 days ago   ...    
f46fb1dec520        5c6e1090e771        &quot;/bin/sh -c 'set -x \t&quot;   2 days ago   ...   
a63b4a5597de        860c279d2fec        &quot;bash&quot;                    2 days ago   ...
</code></pre><p>列出所有创建的容器ID。</p><pre><code>runoob@runoob:~$ docker ps -a -q
09b93464c2f7
b8573233d675
b1a0703e41e7
f46fb1dec520
a63b4a5597de
6a4aa42e947b
de7bb36e7968
43a432b73776
664a8ab1a585
ba52eb632bbd
</code></pre><h2 id=docker-inspect------------查看某个容器的详细信息>docker inspect&mdash;&mdash;&mdash;&mdash;查看某个容器的详细信息<a hidden class=anchor aria-hidden=true href=#docker-inspect------------查看某个容器的详细信息>#</a></h2><p>docker inspect : 获取容器/镜像的元数据。
语法</p><p>docker inspect [OPTIONS] NAME|ID [NAME|ID&mldr;]</p><p>OPTIONS说明：</p><pre><code>-f :指定返回值的模板文件。

-s :显示总的文件大小。

--type :为指定类型返回JSON。
</code></pre><p>实例</p><p>获取镜像mysql:5.6的元信息。</p><pre><code>runoob@runoob:~$ docker inspect mysql:5.6
[
    {
        &quot;Id&quot;: &quot;sha256:2c0964ec182ae9a045f866bbc2553087f6e42bfc16074a74fb820af235f070ec&quot;,
        &quot;RepoTags&quot;: [
            &quot;mysql:5.6&quot;
        ],
        &quot;RepoDigests&quot;: [],
        &quot;Parent&quot;: &quot;&quot;,
        &quot;Comment&quot;: &quot;&quot;,
        &quot;Created&quot;: &quot;2016-05-24T04:01:41.168371815Z&quot;,
        &quot;Container&quot;: &quot;e0924bc460ff97787f34610115e9363e6363b30b8efa406e28eb495ab199ca54&quot;,
        &quot;ContainerConfig&quot;: {
            &quot;Hostname&quot;: &quot;b0cf605c7757&quot;,
            &quot;Domainname&quot;: &quot;&quot;,
            &quot;User&quot;: &quot;&quot;,
            &quot;AttachStdin&quot;: false,
            &quot;AttachStdout&quot;: false,
            &quot;AttachStderr&quot;: false,
            &quot;ExposedPorts&quot;: {
                &quot;3306/tcp&quot;: {}
            },
...
</code></pre><p>获取正在运行的容器mymysql的 IP。</p><pre><code>docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' mymysql
</code></pre><p>获取所有容器的ip地址</p><pre tabindex=0><code>docker inspect --format=&#39;{{.Name}} - {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}&#39; $(docker ps -aq)
</code></pre><h2 id=doker-startstoprestart------开启关闭重启一个容器>doker start/stop/restart&mdash;&mdash;开启、关闭、重启一个容器<a hidden class=anchor aria-hidden=true href=#doker-startstoprestart------开启关闭重启一个容器>#</a></h2><p>docker start :启动一个或多个已经被停止的容器</p><p>docker stop :停止一个运行中的容器</p><p>docker restart :重启容器</p><p>语法</p><p>docker start [OPTIONS] CONTAINER [CONTAINER&mldr;]</p><p>docker stop [OPTIONS] CONTAINER [CONTAINER&mldr;]</p><p>docker restart [OPTIONS] CONTAINER [CONTAINER&mldr;]</p><p>实例</p><p>启动已被停止的容器myrunoob</p><pre><code>docker start myrunoob
</code></pre><p>停止运行中的容器myrunoob</p><pre><code>docker stop myrunoob
</code></pre><p>重启容器myrunoob</p><pre><code>docker restart myrunoob
</code></pre><h2 id=docker-rm--------------删除一个已经停止的容器容器>docker rm&mdash;&mdash;&mdash;&mdash;&ndash;删除一个已经停止的容器容器<a hidden class=anchor aria-hidden=true href=#docker-rm--------------删除一个已经停止的容器容器>#</a></h2><p>docker rm ：删除一个或多少容器
语法</p><p>docker rm [OPTIONS] CONTAINER [CONTAINER&mldr;]</p><p>OPTIONS说明：</p><pre><code>-f :通过SIGKILL信号强制删除一个运行中的容器

-l :移除容器间的网络连接，而非容器本身

-v :-v 删除与容器关联的卷
</code></pre><p>实例</p><p>强制删除容器db01、db02</p><pre><code>docker rm -f db01 db02
</code></pre><p>移除容器nginx01对容器db01的连接，连接名db</p><pre><code>docker rm -l db 
</code></pre><p>删除容器nginx01,并删除容器挂载的数据卷</p><pre><code>docker rm -v nginx01
</code></pre><h2 id=docker-attach------进入一个开启的容器中>docker attach&mdash;&mdash;进入一个开启的容器中<a hidden class=anchor aria-hidden=true href=#docker-attach------进入一个开启的容器中>#</a></h2><p>docker attach :连接到正在运行中的容器。</p><p>语法</p><p>docker attach [OPTIONS] CONTAINER</p><p>要attach上去的容器必须正在运行，可以同时连接上同一个container来共享屏幕（与screen命令的attach类似）。</p><p>官方文档中说attach后可以通过CTRL-C来detach，但实际上经过我的测试，如果container当前在运行bash，CTRL-C自然是当前行的输入，没有退出；如果container当前正在前台运行进程，如输出nginx的access.log日志，CTRL-C不仅会导致退出容器，而且还stop了。这不是我们想要的，detach的意思按理应该是脱离容器终端，但容器依然运行。好在attach是可以带上&ndash;sig-proxy=false来确保CTRL-D或CTRL-C不会关闭容器。
实例</p><p>容器mynginx将访问日志指到标准输出，连接到容器查看访问信息。</p><pre><code>runoob@runoob:~$ docker attach --sig-proxy=false mynginx
192.168.239.1 - - [10/Jul/2016:16:54:26 +0000] &quot;GET / HTTP/1.1&quot; 304 0 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36&quot; &quot;-&quot;
</code></pre><h2 id=docker-logs-----查看容器日志>docker logs&mdash;&ndash;查看容器日志<a hidden class=anchor aria-hidden=true href=#docker-logs-----查看容器日志>#</a></h2><p>docker logs : 获取容器的日志
语法</p><p>docker logs [OPTIONS] CONTAINER</p><p>OPTIONS说明：</p><pre><code>-f : 跟踪日志输出

--since :显示某个开始时间的所有日志

-t : 显示时间戳

--tail :仅列出最新N条容器日志
</code></pre><p>实例</p><p>跟踪查看容器mynginx的日志输出。</p><pre><code>runoob@runoob:~$ docker logs -f mynginx
192.168.239.1 - - [10/Jul/2016:16:53:33 +0000] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36&quot; &quot;-&quot;
2016/07/10 16:53:33 [error] 5#5: *1 open() &quot;/usr/share/nginx/html/favicon.ico&quot; failed (2: No such file or directory), client: 192.168.239.1, server: localhost, request: &quot;GET /favicon.ico HTTP/1.1&quot;, host: &quot;192.168.239.130&quot;, referrer: &quot;http://192.168.239.130/&quot;
192.168.239.1 - - [10/Jul/2016:16:53:33 +0000] &quot;GET /favicon.ico HTTP/1.1&quot; 404 571 &quot;http://192.168.239.130/&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36&quot; &quot;-&quot;
192.168.239.1 - - [10/Jul/2016:16:53:59 +0000] &quot;GET / HTTP/1.1&quot; 304 0 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.93 Safari/537.36&quot; &quot;-&quot;
...
</code></pre><p>查看容器mynginx从2016年7月1日后的最新10条日志。</p><pre><code>docker logs --since=&quot;2016-07-01&quot; --tail=10 mynginx
</code></pre><h2 id=docker-top-----查看容器内的进程>docker top&mdash;&ndash;查看容器内的进程<a hidden class=anchor aria-hidden=true href=#docker-top-----查看容器内的进程>#</a></h2><p>docker top :查看容器中运行的进程信息，支持 ps 命令参数。
语法</p><p>docker top [OPTIONS] CONTAINER [ps OPTIONS]</p><p>容器运行时不一定有/bin/bash终端来交互执行top命令，而且容器还不一定有top命令，可以使用docker top来实现查看container中正在运行的进程。
实例</p><p>查看容器mymysql的进程信息。</p><pre><code>runoob@runoob:~/mysql$ docker top mymysql
UID    PID    PPID    C      STIME   TTY  TIME       CMD
999    40347  40331   18     00:58   ?    00:00:02   mysqld
</code></pre><p>查看所有运行容器的进程信息。</p><pre><code>for i in  `docker ps |grep Up|awk '{print $1}'`;do echo \ &amp;&amp;docker top $i; done
</code></pre><h2 id=docker-exec------在容器中启动新的进程>docker exec&mdash;&mdash;在容器中启动新的进程<a hidden class=anchor aria-hidden=true href=#docker-exec------在容器中启动新的进程>#</a></h2><p>docker exec ：在运行的容器中执行命令
语法</p><p>docker exec [OPTIONS] CONTAINER COMMAND [ARG&mldr;]</p><p>OPTIONS说明：</p><pre><code>-d :分离模式: 在后台运行

-i :即使没有附加也保持STDIN 打开

-t :分配一个伪终端
</code></pre><p>实例</p><p>在容器 mynginx 中以交互模式执行容器内 /root/runoob.sh 脚本:</p><pre><code>runoob@runoob:~$ docker exec -it mynginx /bin/sh /root/runoob.sh
http://www.runoob.com/
</code></pre><p>在容器 mynginx 中开启一个交互模式的终端:</p><pre><code>runoob@runoob:~$ docker exec -i -t  mynginx /bin/bash
root@b1a0703e41e7:/#
</code></pre><p>也可以通过 docker ps -a 命令查看已经在运行的容器，然后使用容器 ID 进入容器。</p><p>查看已经在运行的容器 ID：</p><pre><code> docker ps -a 
...
9df70f9a0714        openjdk             &quot;/usercode/script.sh…&quot; 
...
</code></pre><p>第一列的 9df70f9a0714 就是容器 ID。</p><p>通过 exec 命令对指定的容器执行 bash:</p><pre><code> docker exec -it 9df70f9a0714 /bin/bash
</code></pre><h2 id=dokcer-kill-----停止容器>dokcer kill&mdash;&ndash;停止容器<a hidden class=anchor aria-hidden=true href=#dokcer-kill-----停止容器>#</a></h2><p>docker kill :杀掉一个运行中的容器。
语法</p><p>docker kill [OPTIONS] CONTAINER [CONTAINER&mldr;]</p><p>OPTIONS说明：</p><pre><code>-s :向容器发送一个信号
</code></pre><p>实例</p><p>杀掉运行中的容器mynginx</p><pre><code>runoob@runoob:~$ docker kill -s KILL mynginx
mynginx
</code></pre><h1 id=镜像操作>镜像操作<a hidden class=anchor aria-hidden=true href=#镜像操作>#</a></h1><h2 id=docker-images-------查看镜像>docker images&mdash;&mdash;-查看镜像<a hidden class=anchor aria-hidden=true href=#docker-images-------查看镜像>#</a></h2><p>docker images : 列出本地镜像。
语法</p><p>docker images [OPTIONS] [REPOSITORY[:TAG]]</p><p>OPTIONS说明：</p><pre><code>-a :列出本地所有的镜像（含中间映像层，默认情况下，过滤掉中间映像层）；

--digests :显示镜像的摘要信息；

-f :显示满足条件的镜像；

--format :指定返回值的模板文件；

--no-trunc :显示完整的镜像信息；

-q :只显示镜像ID。
</code></pre><p>实例</p><p>查看本地镜像列表。</p><pre><code>runoob@runoob:~$ docker images
REPOSITORY              TAG                 IMAGE ID            CREATED             SIZE
mymysql                 v1                  37af1236adef        5 minutes ago       329 MB
runoob/ubuntu           v4                  1c06aa18edee        2 days ago          142.1 MB
&lt;none&gt;                  &lt;none&gt;              5c6e1090e771        2 days ago          165.9 MB
httpd                   latest              ed38aaffef30        11 days ago         195.1 MB
alpine                  latest              4e38e38c8ce0        2 weeks ago         4.799 MB
mongo                   3.2                 282fd552add6        3 weeks ago         336.1 MB
redis                   latest              4465e4bcad80        3 weeks ago         185.7 MB
php                     5.6-fpm             025041cd3aa5        3 weeks ago         456.3 MB
python                  3.5                 045767ddf24a        3 weeks ago         684.1 MB
...
</code></pre><p>列出本地镜像中REPOSITORY为ubuntu的镜像列表。</p><pre><code>root@runoob:~# docker images  ubuntu
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              14.04               90d5884b1ee0        9 weeks ago         188 MB
ubuntu              15.10               4e3b13c8a266        3 months ago        136.3 MB
</code></pre><h2 id=docker-inspect-------查看镜像或者容器的详细信息>docker inspect&mdash;&mdash;-查看镜像或者容器的详细信息<a hidden class=anchor aria-hidden=true href=#docker-inspect-------查看镜像或者容器的详细信息>#</a></h2><p>docker inspect : 获取容器/镜像的元数据。
语法</p><p>docker inspect [OPTIONS] NAME|ID [NAME|ID&mldr;]</p><p>OPTIONS说明：</p><pre><code>-f :指定返回值的模板文件。

-s :显示总的文件大小。

--type :为指定类型返回JSON。
</code></pre><p>实例</p><p>获取镜像mysql:5.6的元信息。</p><pre><code>runoob@runoob:~$ docker inspect mysql:5.6
[
    {
        &quot;Id&quot;: &quot;sha256:2c0964ec182ae9a045f866bbc2553087f6e42bfc16074a74fb820af235f070ec&quot;,
        &quot;RepoTags&quot;: [
            &quot;mysql:5.6&quot;
        ],
        &quot;RepoDigests&quot;: [],
        &quot;Parent&quot;: &quot;&quot;,
        &quot;Comment&quot;: &quot;&quot;,
        &quot;Created&quot;: &quot;2016-05-24T04:01:41.168371815Z&quot;,
        &quot;Container&quot;: &quot;e0924bc460ff97787f34610115e9363e6363b30b8efa406e28eb495ab199ca54&quot;,
        &quot;ContainerConfig&quot;: {
            &quot;Hostname&quot;: &quot;b0cf605c7757&quot;,
            &quot;Domainname&quot;: &quot;&quot;,
            &quot;User&quot;: &quot;&quot;,
            &quot;AttachStdin&quot;: false,
            &quot;AttachStdout&quot;: false,
            &quot;AttachStderr&quot;: false,
            &quot;ExposedPorts&quot;: {
                &quot;3306/tcp&quot;: {}
            },
...
</code></pre><p>获取正在运行的容器mymysql的 IP。</p><pre><code>runoob@runoob:~$ docker inspect --format='{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' mymysql
172.17.0.3
</code></pre><h2 id=docker-rmi------删除镜像>docker rmi&mdash;&mdash;删除镜像<a hidden class=anchor aria-hidden=true href=#docker-rmi------删除镜像>#</a></h2><p>docker rmi : 删除本地一个或多少镜像。
语法</p><p>docker rmi [OPTIONS] IMAGE [IMAGE&mldr;]</p><p>OPTIONS说明：</p><pre><code>-f :强制删除；

--no-prune :不移除该镜像的过程镜像，默认移除；
</code></pre><p>注：IMAGE可以使用[仓库：标签]的格式，也可以使用镜像ID，可以同时删除多个镜像
1、使用[仓库：标签]的格式：删除一个标签。当一个镜像文件有多个标签时，删除完所有的标签，镜像文件也随之删除
2、使用镜像ID的格式：先将该镜像文件的所有标签删除，再删除镜像文件</p><p>删除所有镜像</p><pre><code>docker rmi $(docker images -q)
</code></pre><p>删除某个仓库的所有镜像</p><pre><code>docker rmi $(docker images -q ubuntu)
</code></pre><p>实例</p><p>强制删除本地镜像 runoob/ubuntu:v4。</p><pre><code>root@runoob:~# docker rmi -f runoob/ubuntu:v4
Untagged: runoob/ubuntu:v4
Deleted: sha256:1c06aa18edee44230f93a90a7d88139235de12cd4c089d41eed8419b503072be
Deleted: sha256:85feb446e89a28d58ee7d80ea5ce367eebb7cec70f0ec18aa4faa874cbd97c73
</code></pre><h2 id=docker-search---------查找镜像>docker search&mdash;&mdash;&mdash;查找镜像<a hidden class=anchor aria-hidden=true href=#docker-search---------查找镜像>#</a></h2><p>语法</p><p>docker search [OPTIONS] TERM</p><p>OPTIONS说明：</p><pre><code>--automated :只列出 automated build类型的镜像；

--no-trunc :显示完整的镜像描述；

-s :列出收藏数不小于指定值的镜像。
</code></pre><p>实例</p><p>从Docker Hub查找所有镜像名包含java，并且收藏数大于10的镜像</p><pre><code>runoob@runoob:~$ docker search -s 10 java
NAME                  DESCRIPTION                           STARS   OFFICIAL   AUTOMATED
java                  Java is a concurrent, class-based...   1037    [OK]       
anapsix/alpine-java   Oracle Java 8 (and 7) with GLIBC ...   115                [OK]
develar/java                                                 46                 [OK]
isuper/java-oracle    This repository contains all java...   38                 [OK]
lwieske/java-8        Oracle Java 8 Container - Full + ...   27                 [OK]
nimmis/java-centos    This is docker images of CentOS 7...   13                 [OK]
</code></pre><h2 id=docker-pull-----拉取镜像>docker pull&mdash;&ndash;拉取镜像<a hidden class=anchor aria-hidden=true href=#docker-pull-----拉取镜像>#</a></h2><p>docker pull [OPTIONS] NAME[:TAG|@DIGEST]</p><p>OPTIONS说明：</p><pre><code>-a :拉取所有 tagged 镜像

--disable-content-trust :忽略镜像的校验,默认开启
</code></pre><p>实例</p><p>从Docker Hub下载java最新版镜像。</p><pre><code>docker pull java
</code></pre><p>从Docker Hub下载REPOSITORY为java的所有镜像。</p><pre><code>docker pull -a java
</code></pre><h2 id=docker-push----推送镜像>docker push&mdash;-推送镜像<a hidden class=anchor aria-hidden=true href=#docker-push----推送镜像>#</a></h2><p>docker push : 将本地的镜像上传到镜像仓库,要先登陆到镜像仓库
语法</p><p>docker push [OPTIONS] NAME[:TAG]</p><p>OPTIONS说明：</p><pre><code>--disable-content-trust :忽略镜像的校验,默认开启
</code></pre><p>实例</p><p>上传本地镜像myapache:v1到镜像仓库中。</p><pre><code>docker push myapache:v1
</code></pre><h2 id=docker-commit-----通过容器构建镜像>docker commit&mdash;&ndash;通过容器构建镜像<a hidden class=anchor aria-hidden=true href=#docker-commit-----通过容器构建镜像>#</a></h2><p>docker commit :从容器创建一个新的镜像。
语法</p><p>docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</p><p>OPTIONS说明：</p><pre><code>-a :提交的镜像作者；

-c :使用Dockerfile指令来创建镜像；

-m :提交时的说明文字；

-p :在commit时，将容器暂停。
</code></pre><p>实例</p><p>将容器a404c6c174a2 保存为新的镜像,并添加提交人信息和说明信息。</p><pre><code>runoob@runoob:~$ docker commit -a &quot;runoob.com&quot; -m &quot;my apache&quot; a404c6c174a2  mymysql:v1 
sha256:37af1236adef1544e8886be23010b66577647a40bc02c0885a6600b33ee28057
runoob@runoob:~$ docker images mymysql:v1
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
mymysql             v1                  37af1236adef        15 seconds ago      329 MB
</code></pre><h2 id=docker-build------通过dockerfile构建镜像>docker build&mdash;&mdash;通过Dockerfile构建镜像<a hidden class=anchor aria-hidden=true href=#docker-build------通过dockerfile构建镜像>#</a></h2><p>docker build 命令用于使用 Dockerfile 创建镜像。
语法</p><p>docker build [OPTIONS] PATH | URL | -</p><p>OPTIONS说明：</p><pre><code>--build-arg=[] :设置镜像创建时的变量；

--cpu-shares :设置 cpu 使用权重；

--cpu-period :限制 CPU CFS周期；

--cpu-quota :限制 CPU CFS配额；

--cpuset-cpus :指定使用的CPU id；

--cpuset-mems :指定使用的内存 id；

--disable-content-trust :忽略校验，默认开启；

-f :指定要使用的Dockerfile路径；

--force-rm :设置镜像过程中删除中间容器；

--isolation :使用容器隔离技术；

--label=[] :设置镜像使用的元数据；

-m :设置内存最大值；

--memory-swap :设置Swap的最大值为内存+swap，&quot;-1&quot;表示不限swap；

--no-cache :创建镜像的过程不使用缓存；

--pull :尝试去更新镜像的新版本；

--quiet, -q :安静模式，成功后只输出镜像 ID；

--rm :设置镜像成功后删除中间容器；

--shm-size :设置/dev/shm的大小，默认值是64M；

--ulimit :Ulimit配置。

--tag, -t: 镜像的名字及标签，通常 name:tag 或者 name 格式；可以在一次构建中为一个镜像设置多个标签。

--network: 默认 default。在构建期间设置RUN指令的网络模式
</code></pre><p>实例</p><p>使用当前目录的 Dockerfile 创建镜像，标签为 runoob/ubuntu:v1。</p><pre><code>docker build -t runoob/ubuntu:v1 . 
</code></pre><p>使用URL github.com/creack/docker-firefox 的 Dockerfile 创建镜像。</p><pre><code>docker build github.com/creack/docker-firefox
</code></pre><p>也可以通过 -f Dockerfile 文件的位置：</p><pre><code>$ docker build -f /path/to/a/Dockerfile .
</code></pre><p>在 Docker 守护进程执行 Dockerfile 中的指令前，首先会对 Dockerfile 进行语法检查，有语法错误时会返回：</p><pre><code>$ docker build -t test/myapp .
Sending build context to Docker daemon 2.048 kB
Error response from daemon: Unknown instruction: RUNCMD</code></pre></div><div class=post-reward><div style=padding:0;margin:0;width:100%;font-size:16px;text-align:center><div id=QR style=opacity:0><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://www.lvbibir.cn/img/wechat_pay.png alt=wechat_pay></a><p>微信</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://www.lvbibir.cn/img/alipay.png alt=alipay></a><p>支付宝</p></div></div><button id=rewardButton onclick='var qr=document.getElementById("QR");qr.style.opacity==="0"?qr.style.opacity="1":qr.style.opacity="0"'>
<span>🧧 鼓励</span></button></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://www.lvbibir.cn/posts/tech/docker-swarm/><span class=title>« 上一页</span><br><span>docker | 三剑客之swarm</span></a>
<a class=next href=https://www.lvbibir.cn/posts/tech/docker-rong-qi-kua-zhu-ji-lian-jie/><span class=title>下一页 »</span><br><span>docker | 容器的跨主机连接</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>💬评论</span><hr></div><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.5.11/twikoo.all.min.js></script><script>twikoo.init({envId:"https://twikoo-lvbibir.vercel.app/",el:"#tcomment",lang:"zh-CN",region:"ap-guangzhou",path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><footer class=footer><span>Copyright
&copy;
2020-2022
<a href=https://www.lvbibir.cn style=color:#939393>lvbibir's Blog</a>
All Rights Reserved</span>
<a href=https://beian.miit.gov.cn/ target=_blank style=color:#939393>京ICP备2021023168号-1</a>&nbsp;
<span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>总访客数: <span id=busuanzi_value_site_uv></span>
总访问量: <span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg><span id=read_progress></span></span></a>
<script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="📄复制";function s(){t.innerText="👌🏻已复制!",setTimeout(()=>{t.innerText="📄复制"},2e3)}t.addEventListener("click",t=>{const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>