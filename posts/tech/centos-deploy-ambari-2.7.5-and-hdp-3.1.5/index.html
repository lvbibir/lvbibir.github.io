<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>éƒ¨ç½² Ambari 2.7.5 + HDP 3.1.5 | lvbibir's Blog</title><meta name=keywords content="hadoop,ambari"><meta name=description content="è®°å½•é€šè¿‡ Ambari éƒ¨ç½² hadoop é›†ç¾¤çš„è¿‡ç¨‹"><meta name=author content="ä½œè€…:&nbsp;lvbibir"><link rel=canonical href=https://www.lvbibir.cn/posts/tech/centos-deploy-ambari-2.7.5-and-hdp-3.1.5/><link crossorigin=anonymous href=/assets/css/stylesheet.6ae04185be267d218870ba8449572db8ef0ebb0e2863c2c015d6a0d5bce015cf.css integrity="sha256-auBBhb4mfSGIcLqESVctuO8Ouw4oY8LAFdag1bzgFc8=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.lvbibir.cn/images/avatar.webp><link rel=icon type=image/png sizes=16x16 href=https://www.lvbibir.cn/images/avatar.webp><link rel=icon type=image/png sizes=32x32 href=https://www.lvbibir.cn/images/avatar.webp><link rel=apple-touch-icon href=https://www.lvbibir.cn/images/avatar.webp><link rel=mask-icon href=https://www.lvbibir.cn/images/avatar.webp><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=/fonts/JetBrainsLxgwNerdMono/all.css><script>document.addEventListener('DOMContentLoaded',function(){const e=document.querySelectorAll('img.lazyload');if('IntersectionObserver'in window){const t=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){const n=e.target;n.src=n.dataset.src,n.classList.remove('lazyload'),n.classList.add('lazyloaded'),t.unobserve(n)}})},{rootMargin:'50px 0px',threshold:.01});e.forEach(function(e){t.observe(e)})}else e.forEach(function(e){e.src=e.dataset.src})})</script><meta property="og:title" content="éƒ¨ç½² Ambari 2.7.5 + HDP 3.1.5"><meta property="og:description" content="è®°å½•é€šè¿‡ Ambari éƒ¨ç½² hadoop é›†ç¾¤çš„è¿‡ç¨‹"><meta property="og:type" content="article"><meta property="og:url" content="https://www.lvbibir.cn/posts/tech/centos-deploy-ambari-2.7.5-and-hdp-3.1.5/"><meta property="og:image" content="https://www.lvbibir.cn/images/cover-ambari.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-01T00:00:00+00:00"><meta property="article:modified_time" content="2024-01-27T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.lvbibir.cn/images/cover-ambari.png"><meta name=twitter:title content="éƒ¨ç½² Ambari 2.7.5 + HDP 3.1.5"><meta name=twitter:description content="è®°å½•é€šè¿‡ Ambari éƒ¨ç½² hadoop é›†ç¾¤çš„è¿‡ç¨‹"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"ğŸ“š æ–‡ç« ","item":"https://www.lvbibir.cn/posts/"},{"@type":"ListItem","position":3,"name":"ğŸ‘¨ğŸ»â€ğŸ’» æŠ€æœ¯","item":"https://www.lvbibir.cn/posts/tech/"},{"@type":"ListItem","position":4,"name":"éƒ¨ç½² Ambari 2.7.5 + HDP 3.1.5","item":"https://www.lvbibir.cn/posts/tech/centos-deploy-ambari-2.7.5-and-hdp-3.1.5/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"éƒ¨ç½² Ambari 2.7.5 + HDP 3.1.5","name":"éƒ¨ç½² Ambari 2.7.5 \u002b HDP 3.1.5","description":"è®°å½•é€šè¿‡ Ambari éƒ¨ç½² hadoop é›†ç¾¤çš„è¿‡ç¨‹","keywords":["hadoop","ambari"],"articleBody":"0 å‰è¨€ åŸºäº isoft-serveros-v4.2\næœ¬æ–‡å‚è€ƒä»¥ä¸‹é“¾æ¥:\nå®‰è£…Ambari 2.7.5 + HDP3.1.5ï¼ˆé™„å®‰è£…åŒ…ï¼‰ 1 å‰æœŸå‡†å¤‡ 1.1 å®‰è£…åŒ…å‡†å¤‡ Ambari-2.7.5 HDP-3.1.5 libtirpc-devel:\né“¾æ¥ï¼šhttps://pan.baidu.com/s/1eteZ2jGkSq4Pz5YFfHyJgQ\næå–ç ï¼š6hq3\n1.2 æœåŠ¡å™¨é…ç½® ä¸»æœºå cpu å†…å­˜ ç¡¬ç›˜ ç³»ç»Ÿç‰ˆæœ¬ ip åœ°å€ node001 4c 10g 50g isoft-serveros-4.2 192.168.150.106 node002 2c 4g 20g isoft-serveros-4.2 192.168.150.107 1.3 ä¿®æ”¹ç³»ç»Ÿç‰ˆæœ¬æ–‡ä»¶ (allnode) sed -i 's/4/7/g' /etc/redhat-release sed -i 's/4/7/g' /etc/os-release 1.4 é…ç½®ä¸»æœºå (allnode) 2 å°æœåŠ¡å™¨çš„ hosts éƒ½éœ€è¦åšå¦‚ä¸‹ä¿®æ”¹\nä¿®æ”¹ä¸»æœºå hostnamectl set-hostname node001 bash ä¿®æ”¹ hosts æ–‡ä»¶ vim /etc/hosts 127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4 ::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 192.168.150.106 node001 192.168.150.107 node002 1.5 å…³é—­é˜²ç«å¢™åŠ selinux (allnode) 2 å°æœåŠ¡å™¨ä¸Šåˆ†åˆ«æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œå…³é—­é˜²ç«å¢™å¹¶é…ç½®å¼€æœºä¸è‡ªåŠ¨å¯åŠ¨\nsystemctl stop firewalld systemctl disable firewalld setenforce 0 ä¸ºäº†é‡å¯åä¾ç„¶å…³é—­ï¼Œé…ç½®å¦‚ä¸‹æ–‡ä»¶\nvim /etc/sysconfig/selinux # ä¿®æ”¹ SELINUX=disabled 1.6 é…ç½® ssh äº’ä¿¡ (allnode) æ–¹æ³•ä¸€\nåœ¨æ¯å°æœåŠ¡å™¨ä¸Šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼Œä¸€ç›´å›è½¦å³å¯\nssh-keygen -t rsa ssh-copy-id -i /root/.ssh/id_rsa.pub node001 ssh-copy-id -i /root/.ssh/id_rsa.pub node002 æ–¹æ³•äºŒ\nåœ¨æ¯å°æœåŠ¡å™¨ä¸Šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼Œä¸€ç›´å›è½¦å³å¯\nssh-keygen -t rsa åœ¨æœåŠ¡å™¨ 1 ä¸Šå°†å…¬é’¥ï¼ˆåä¸º id_rsa.pub æ–‡ä»¶ï¼‰è¿½åŠ åˆ°è®¤è¯æ–‡ä»¶ï¼ˆåä¸º authorized_keys æ–‡ä»¶ï¼‰ä¸­:\ncat ~/.ssh/id_rsa.pub \u003e\u003e ~/.ssh/authorized_keys å»å…¶ä»–æœåŠ¡å™¨èŠ‚ç‚¹å°† ~/.ssh/id_rsa.pub ä¸­çš„å†…å®¹æ‹·è´åˆ°æœåŠ¡å™¨ 1 çš„ ~/.ssh/authorized_keys ä¸­,æŸ¥çœ‹æ–‡ä»¶ä¸­çš„å†…å®¹\ncat ~/.ssh/authorized_keys ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC/eA09X4s5RIYvuYNxVvtOo6unY1mgipsFyoz/hy/Gwk0onfZvBi/Sl3TVRZO5aqcHccAGlLF7OPTKH1qUuKVtnUOQik0TouL5VKsOBDMHHRT9D5UwqaIE8tYDC8V6uwieFgscZcBjhrsJ/Iramo9ce7N9RTO3otRMRQxOs+Wd1F/ZOmpRtMGU2N4RH4i2quRU6m2lt/eJKpNupSHKoztTQRsEanilHVASnikAXH8JpG70iO7RXR/hLz+/Of3ISUrOMSO4/ZIIu4xnYN3jvsXOdK/qIhP/PI2s+uF22IvVE6xZYVadQFa4zAuhQmCBWkE7vMyI1UJkxP7OQYj72LUH root@node001 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCnz8wHoytR2Xlnl04rQq4I2vgUVWbkKjv30pj+Toz4719ah4cY9pvZj0JsfhVzaaCsR14BLFVLkqKUhCWK3K6muT4iHb+N0WirpbwfJkztmQeco7Ha9xrPQ8v/I4xZujFoMVA0tkb/32zRTxOkPv9AUgB8V6Lin6LnB/AcnhnmoIs5PdbAdh/kBGpQGKIZkbyCUOYz9/PZuGJoJBblqfWiqzxYYLN9+cYMkmPnB1HdDewAepIsIC18U3ujE+1Su2UlmISPvvr1zG4XR4ZZoKQsOOJq3XRMGVkDvmFhl03JHZpd6BW0796CeYVZ41UomWXTOduQql+tYWUbegzGLmRZ root@node002 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC8AFoGJHp2M45xLYNzXUHLWzRwHsgRPHjeErStq0tEy9bQv4OkN41j0FrxVAYJiGHdHGturriVgUEtL59RjcrJH6bAvhP54nM5YiQlNnWnSUR27Zuaodz4nhYUFq/Co5eDN6lTfL8pgYiEdpBOvE5t1w3bisdblP7YGQ2lF1zzCEGfQ79QbntEbyGNoR9sGHm11x9fOH+fape8TjQJrEAO4d1tAhMqVygQKwqwAPKeqhEum6BaLli83TsXzd7gyz9H7AAc1m04NaLB26xfynW6MVuk1j94awXKlGXjrbNTC/Kg6M8bd5PT/k3DOkx4b+nEs8xZ5x1j4D2OaO1X6rZx root@node003 è®¾ç½®è®¤è¯æ–‡ä»¶çš„æƒé™ï¼š\nchmod 600 ~/.ssh/authorized_keys å°† ~/.ssh/authorized_keys åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹\nscp ~/.ssh/authorized_keys node002:~/.ssh/authorized_keys æ³¨æ„ï¼šè¿™é‡Œç¬¬ä¸€æ¬¡ä½¿ç”¨åŒæ­¥è¿˜éœ€è¦å¯†ç ï¼Œä¹‹åå°±ä¸éœ€è¦äº†\néªŒè¯å…å¯†æ˜¯å¦é…ç½®æˆåŠŸ\nssh åˆ°ä¸åŒæœåŠ¡å™¨\nssh node002 1.7 é…ç½® ntp æ—¶é’ŸåŒæ­¥ é€‰æ‹©ä¸€å°æœåŠ¡å™¨ä½œä¸º NTP Serverï¼Œè¿™é‡Œé€‰æ‹© node001\nå°†å¦‚ä¸‹é…ç½® vim /etc/ntp.conf\n# Use public servers from the pool.ntp.org project. # Please consider joining the pool (http://www.pool.ntp.org/join.html). server 0.centos.pool.ntp.org iburst server 1.centos.pool.ntp.org iburst server 2.centos.pool.ntp.org iburst server 3.centos.pool.ntp.org iburst ä¿®æ”¹ä¸º\n# Use public servers from the pool.ntp.org project. # Please consider joining the pool (http://www.pool.ntp.org/join.html). #server 0.centos.pool.ntp.org iburst #server 1.centos.pool.ntp.org iburst #server 2.centos.pool.ntp.org iburst #server 3.centos.pool.ntp.org iburst server 127.127.1.0 fudge 127.127.1.0 stratum 10 node002 èŠ‚ç‚¹åšå¦‚ä¸‹é…ç½®\nvim /etc/ntp.conf å°†\n# Use public servers from the pool.ntp.org project. # Please consider joining the pool (http://www.pool.ntp.org/join.html). server 0.centos.pool.ntp.org iburst server 1.centos.pool.ntp.org iburst server 2.centos.pool.ntp.org iburst server 3.centos.pool.ntp.org iburst ä¿®æ”¹ä¸º\n# Use public servers from the pool.ntp.org project. # Please consider joining the pool (http://www.pool.ntp.org/join.html). #server 0.centos.pool.ntp.org iburst #server 1.centos.pool.ntp.org iburst #server 2.centos.pool.ntp.org iburst #server 3.centos.pool.ntp.org iburst server 192.168.150.106 åœ¨æ¯å°æœåŠ¡å™¨ä¸Šå¯åŠ¨ ntpd æœåŠ¡ï¼Œå¹¶é…ç½®æœåŠ¡å¼€æœºè‡ªå¯åŠ¨\nsystemctl restart ntpd systemctl enable ntpd 1.8 è®¾ç½® swap(allnode) echo vm.swappiness = 1 \u003e\u003e /etc/sysctl.conf sysctl vm.swappiness=1 sysctl -p 1.9 å…³é—­é€æ˜å¤§é¡µé¢ (allnode) ç”±äºé€æ˜è¶…å¤§é¡µé¢å·²çŸ¥ä¼šå¯¼è‡´æ„å¤–çš„èŠ‚ç‚¹é‡æ–°å¯åŠ¨å¹¶å¯¼è‡´ RAC å‡ºç°æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤ Oracle å¼ºçƒˆå»ºè®®ç¦ç”¨\necho never \u003e /sys/kernel/mm/transparent_hugepage/defrag echo never \u003e /sys/kernel/mm/transparent_hugepage/enabled 1.10 å®‰è£… http æœåŠ¡ (node001) å®‰è£… apache çš„ httpd æœåŠ¡ä¸»è¦ç”¨äºæ­å»º OS. Ambari å’Œ hdp çš„ yum æºã€‚åœ¨é›†ç¾¤æœåŠ¡å™¨ä¸­é€‰æ‹©ä¸€å°æœåŠ¡å™¨æ¥å®‰è£… httpd æœåŠ¡ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š\nyum -y install httpd systemctl start httpd systemctl enable httpd.service éªŒè¯ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥http://192.168.150.106çœ‹åˆ°å¦‚ä¸‹æˆªå›¾åˆ™è¯´æ˜å¯åŠ¨æˆåŠŸã€‚\n1.11 å®‰è£… Java(allnode) ä¸‹è½½åœ°å€ï¼šhttps://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html\ntar -zxvf jdk-8u271-linux-x64.tar.gz mkdir /usr/local/java mv jdk1.8.0_271/* /usr/local/java é…ç½®ç¯å¢ƒå˜é‡\nvim /root/.bashrc æ·»åŠ å¦‚ä¸‹é…ç½®\nexport JAVA_HOME=/usr/local/java export PATH=$PATH:$JAVA_HOME/bin export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar export JRE_HOME=$JAVA_HOME/jre æ¿€æ´»é…ç½®\nsource /root/.bashrc java -version 1.12 å®‰è£… maven3.6(node001) ä¸‹è½½è§£å‹\ntar -zxvf apache-maven-3.6.3-bin.tar.gz mkdir -p /opt/src/maven mv apache-maven-3.6.3/* /opt/src/maven é…ç½® maven ç¯å¢ƒå˜é‡\nvim /root/.bashrc # set maven home export PATH=$PATH:/opt/src/maven/bin æ¿€æ´»\nsource /root/.bashrc 2 å®‰è£… Ambari \u0026 HDP 2.1 é…ç½®æœ¬åœ°æº è§£å‹\ntar -zxvf ambari-2.7.5.0-centos7.tar.gz -C /var/www/html/ tar -zxvf HDP-3.1.5.0-centos7-rpm.tar.gz -C /var/www/html/ tar -zxvf HDP-GPL-3.1.5.0-centos7-gpl.tar.gz -C /var/www/html/ tar -zxvf HDP-UTILS-1.1.0.22-centos7.tar.gz -C /var/www/html/ ll /var/www/html/ æ€»ç”¨é‡ 0 drwxr-xr-x. 3 root root 21 11æœˆ 23 22:31 ambari drwxr-xr-x. 3 1001 users 21 12æœˆ 18 2019 HDP drwxr-xr-x. 3 1001 users 21 12æœˆ 18 2019 HDP-GPL drwxr-xr-x. 3 1001 users 21 8æœˆ 13 2018 HDP-UTILS è®¾ç½®è®¾ç½®ç”¨æˆ·ç»„å’Œæˆæƒ\nchown -R root:root /var/www/html/HDP chown -R root:root /var/www/html/HDP-GPL chown -R root:root /var/www/html/HDP-UTILS chmod -R 755 /var/www/html/HDP chmod -R 755 /var/www/html/HDP-GPL chmod -R 755 /var/www/html/HDP-UTILS åˆ›å»º libtirpc-devel æœ¬åœ°æº\nmkdir /var/www/html/libtirpc mv /root/libtirpc-* /var/www/html/libtirpc/ cd /var/www/html/libtirpc createrepo . åˆ¶ä½œæœ¬åœ°æº\né…ç½® ambari.repo\nvim /etc/yum.repos.d/ambari.repo [Ambari-2.7.5.0] name=Ambari-2.7.5.0 baseurl=http://192.168.150.106/ambari/centos7/2.7.5.0-72/ gpgcheck=0 enabled=1 priority=1 é…ç½® HDP å’Œ HDP-TILS\nvim /etc/yum.repos.d/HDP.repo [HDP-3.1.5.0] name=HDP Version - HDP-3.1.5.0 baseurl=http://192.168.150.106/HDP/centos7/3.1.5.0-152/ gpgcheck=0 enabled=1 priority=1 [HDP-UTILS-1.1.0.22] name=HDP-UTILS Version - HDP-UTILS-1.1.0.22 baseurl=http://192.168.150.106/HDP-UTILS/centos7/1.1.0.22/ gpgcheck=0 enabled=1 priority=1 [HDP-GPL-3.1.5.0] name=HDP-GPL Version - HDP-GPL-3.1.5.0 baseurl=http://192.168.150.106/HDP-GPL/centos7/3.1.5.0-152 gpgcheck=0 enabled=1 priority=1 é…ç½® libtirpc.repo\nvim /etc/yum.repos.d/libtirpc.repo [libtirpc_repo] name=libtirpc-0.2.4-0.16 baseurl=http://192.168.150.106/libtirpc/ gpgcheck=0 enabled=1 priority=1 æ‹·è´åˆ°å…¶ä»–èŠ‚ç‚¹\nscp /etc/yum.repos.d/* node002:/etc/yum.repos.d/ æŸ¥çœ‹æº\nyum clean all yum repolist 2.2 å®‰è£… mariadb(node001) å®‰è£… MariaDB æœåŠ¡å™¨\nyum install mariadb-server -y å¯åŠ¨å¹¶è®¾ç½®å¼€æœºå¯åŠ¨\nsystemctl enable mariadb systemctl start mariadb åˆå§‹åŒ–\n/usr/bin/mysql_secure_installation [...] Enter current password for root (enter for none): OK, successfully used password, moving on... [...] Set root password? [Y/n] Y New password:123456 Re-enter new password:123456 [...] Remove anonymous users? [Y/n] Y [...] Disallow root login remotely? [Y/n] N [...] Remove test database and access to it [Y/n] Y [...] Reload privilege tables now? [Y/n] Y [...] All done! If you've completed all of the above steps, your MariaDB 18 installation should now be secure. Thanks for using MariaDB! ä¸º MariaDB å®‰è£… MySQL JDBC é©±åŠ¨ç¨‹åº\ntar zxf mysql-connector-java-5.1.40.tar.gz mv mysql-connector-java-5.1.40/mysql-connector-java-5.1.40-bin.jar /usr/share/java/mysql-connector-java.jar åˆ›å»ºéœ€è¦çš„æ•°æ®åº“\nå¦‚æœéœ€è¦ rangerï¼Œç¼–è¾‘ä»¥ä¸‹â½‚ä»¶ï¼š vim /etc/my.cnf å¹¶æ·»åŠ ä»¥ä¸‹â¾ï¼š\nlog_bin_trust_function_creators = 1 é‡å¯æ•°æ®åº“å¹¶ç™»å½•\nsystemctl restart mariadb mysql -u root -p123456 2.3 å®‰è£…å’Œé…ç½® ambari-server (node001) å®‰è£… ambari-server\nyum -y install ambari-server å¤åˆ¶ mysql jdbc é©±åŠ¨åˆ° /var/lib/ambari-server/resources/\ncp /usr/share/java/mysql-connector-java.jar /var/lib/ambari-server/resources/ é…ç½® /etc/ambari-server/conf/ambari.propertiesï¼Œæ·»åŠ å¦‚ä¸‹è¡Œ\nvim /etc/ambari-server/conf/ambari.properties server.jdbc.driver.path=/usr/share/java/mysql-connector-java.jar æ‰§è¡Œ\nambari-server setup --jdbc-db=mysql --jdbc-driver=/usr/share/java/mysql-connector-java.jar åˆå§‹åŒ– ambari-server\nambari-server setup 1ï¼‰ æç¤ºæ˜¯å¦è‡ªå®šä¹‰è®¾ç½®ã€‚è¾“å…¥ï¼šy Customize user account for ambari-server daemon [y/n] (n)? y ï¼ˆ2ï¼‰ambari-server è´¦å·ã€‚ Enter user account for ambari-server daemon (root): å¦‚æœç›´æ¥å›è½¦å°±æ˜¯é»˜è®¤é€‰æ‹©rootç”¨æˆ· å¦‚æœè¾“å…¥å·²ç»åˆ›å»ºçš„ç”¨æˆ·å°±ä¼šæ˜¾ç¤ºï¼š Enter user account for ambari-server daemon (root):ambari Adjusting ambari-server permissions and ownership... ï¼ˆ3ï¼‰è®¾ç½®JDKã€‚è¾“å…¥ï¼š2 Checking JDK... Do you want to change Oracle JDK [y/n] (n)? y [1] Oracle JDK 1.8 + Java Cryptography Extension (JCE) Policy Files 8 [2] Custom JDK ============================================================================== Enter choice (1): 2 å¦‚æœä¸Šé¢é€‰æ‹©3è‡ªå®šä¹‰JDK,åˆ™éœ€è¦è®¾ç½®JAVA_HOMEã€‚è¾“å…¥ï¼š/usr/local/java WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts. WARNING: JCE Policy files are required for configuring Kerberos security. If you plan to use Kerberos,please make sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts. Path to JAVA_HOME: /usr/local/java Validating JDK on Ambari Server...done. Completing setup... ï¼ˆ4ï¼‰å®‰è£…GPLï¼Œé€‰æ‹©ï¼šy Checking GPL software agreement... GPL License for LZO: https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html Enable Ambari Server to download and install GPL Licensed LZO packages [y/n] (n)? y ï¼ˆ5ï¼‰æ•°æ®åº“é…ç½®ã€‚é€‰æ‹©ï¼šy Configuring database... Enter advanced database configuration [y/n] (n)? y ï¼ˆ6ï¼‰é€‰æ‹©æ•°æ®åº“ç±»å‹ã€‚è¾“å…¥ï¼š3 Configuring database... ============================================================================== Choose one of the following options: [1] - PostgreSQL (Embedded) [2] - Oracle [3] - MySQL/ MariaDB [4] - PostgreSQL [5] - Microsoft SQL Server (Tech Preview) [6] - SQL Anywhere ============================================================================== Enter choice (3): 3 ï¼ˆ7ï¼‰è®¾ç½®æ•°æ®åº“çš„å…·ä½“é…ç½®ä¿¡æ¯ï¼Œæ ¹æ®å®é™…æƒ…å†µè¾“å…¥ï¼Œå¦‚æœå’Œæ‹¬å·å†…ç›¸åŒï¼Œåˆ™å¯ä»¥ç›´æ¥å›è½¦ã€‚å¦‚æœæƒ³é‡å‘½åï¼Œå°±è¾“å…¥ã€‚ Hostname (localhost):node001 Port (3306): 3306 Database name (ambari): ambari Username (ambari): ambari Enter Database Password (bigdata):ambari123 Re-Enter password: ambari123 ï¼ˆ8ï¼‰å°†Ambariæ•°æ®åº“è„šæœ¬å¯¼å…¥åˆ°æ•°æ®åº“ WARNING: Before starting Ambari Server, you must run the following DDL against the database to create the schema: /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql è¿™ä¸ªsqlåé¢ä¼šç”¨åˆ°ï¼Œå¯¼å…¥æ•°æ®åº“ Proceed with configuring remote database connection properties [y/n] (y)? y ç™»å½• mariadb åˆ›å»º ambari å®‰è£…æ‰€éœ€è¦çš„åº“\nè®¾ç½®çš„è´¦å·åé¢é…ç½® ambari-server çš„æ—¶å€™ä¼šç”¨åˆ°\nmysql -uroot -p123456 CREATE DATABASE ambari; use ambari; CREATE USER 'ambari'@'%' IDENTIFIED BY 'ambari123'; GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'%'; CREATE USER 'ambari'@'localhost' IDENTIFIED BY 'ambari123'; GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'localhost'; CREATE USER 'ambari'@'node001' IDENTIFIED BY 'ambari123'; GRANT ALL PRIVILEGES ON *.* TO 'ambari'@'node001'; source /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql show tables; use mysql; select host,user from user where user='ambari'; CREATE DATABASE hive; use hive; CREATE USER 'hive'@'%' IDENTIFIED BY 'hive'; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'%'; CREATE USER 'hive'@'localhost' IDENTIFIED BY 'hive'; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'localhost'; CREATE USER 'hive'@'node001' IDENTIFIED BY 'hive'; GRANT ALL PRIVILEGES ON *.* TO 'hive'@'node001'; CREATE DATABASE oozie; use oozie; CREATE USER 'oozie'@'%' IDENTIFIED BY 'oozie'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'%'; CREATE USER 'oozie'@'localhost' IDENTIFIED BY 'oozie'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'localhost'; CREATE USER 'oozie'@'node001' IDENTIFIED BY 'oozie'; GRANT ALL PRIVILEGES ON *.* TO 'oozie'@'node001'; FLUSH PRIVILEGES; 2.4 å®‰è£… ambari-agent(allnode) pssh -h /node.list -i 'yum -y install ambari-agent' pssh -h /node.list -i 'systemctl start ambari-agent' 2.5 å®‰è£… libtirpc-devel(allnode) pssh -h /node.list -i 'yum -y install libtirpc-devel' 2.6 å¯åŠ¨ ambari æœåŠ¡ ambari-server start 3 éƒ¨ç½²é›†ç¾¤ 3.1 ç™»å½•ç•Œé¢ http://192.168.150.106:8080\né»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ç™»å½•ï¼Œ è´¦æˆ·ï¼šadmin å¯†ç ï¼šadmin\n3.2 é€‰æ‹©ç‰ˆæœ¬ï¼Œé…ç½® yum æº 1ï¼‰é€‰æ‹© Launch Install Wizard\n2ï¼‰é…ç½®é›†ç¾¤åç§°\n3ï¼‰é€‰æ‹©ç‰ˆæœ¬å¹¶ä¿®æ”¹æœ¬åœ°æºåœ°å€\né€‰ HDP-3.1(Default Version Definition);\né€‰ Use Local Repository;\né€‰ redhat7:\nHDP-3.1ï¼šhttp://node001/HDP/centos7/3.1.5.0-152/\nHDP-3.1-GPL: http://node001/HDP-GPL/centos7/3.1.5.0-152/\nHDP-UTILS-1.1.0.22: http://node001/HDP-UTILS/centos7/1.1.0.22/\n3.3 é…ç½®èŠ‚ç‚¹å’Œå¯†é’¥ ä¸‹è½½ä¸»èŠ‚ç‚¹çš„ /root/.ssh/id_rsaï¼Œå¹¶ä¸Šä¼ ï¼ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œè¿›å…¥ç¡®è®¤ä¸»æœºç•Œé¢\nä¹Ÿå¯ç›´æ¥ cat /root/.ssh/id_rsa ç²˜è´´å³å¯\néªŒè¯é€šè¿‡\n3.4 å‹¾é€‰éœ€è¦å®‰è£…çš„æœåŠ¡ ç”±äºèµ„æºæœ‰é™ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰é€‰æ‹©æ‰€æœ‰æœåŠ¡\n3.5 åˆ†é…æœåŠ¡ master 3.6 åˆ†é…æœåŠ¡ slaves è®¾ç½®ç›¸å…³æœåŠ¡çš„å¯†ç \nGrafana Admin: 123456\nHive Database: hive\nActivity Explorerâ€™s Admin: admin\n3.7 è¿æ¥æ•°æ®åº“ 3.8 ç¼–è¾‘é…ç½®ï¼Œé»˜è®¤å³å¯ 3.9 å¼€å§‹éƒ¨ç½² 3.10 å®‰è£…æˆåŠŸ å³ä¸Šè§’ä¸¤ä¸ªè­¦å‘Šæ˜¯ç£ç›˜ä½¿ç”¨ç‡è­¦å‘Šï¼Œè™šæœºåˆ†é…çš„ç£ç›˜è¾ƒå°\n4 å…¶ä»– 4.1 æ·»åŠ å…¶ä»–ç³»ç»Ÿæ”¯æŒ HDP é»˜è®¤ä¸æ”¯æŒå®‰è£…åˆ° isoft-serverosv4.2ï¼Œéœ€æ‰‹åŠ¨æ·»åŠ æ”¯æŒ\nvim /usr/lib/ambari-server/lib/ambari_commons/resources/os_family.json æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œï¼Œæ³¨æ„ç¼©è¿›å’Œé€—å·\n4.2 YARN Registry DNS æœåŠ¡å¯åŠ¨å¤±è´¥ lsof -i:53 kill -9 4.3 è®¾ç½®åˆå§‹æ£€æµ‹çš„ç³»ç»Ÿç‰ˆæœ¬ vim /etc/ambari-server/conf/ambari.properties server.os_family=redhat7 server.os_type=redhat7 ","wordCount":"2644","inLanguage":"en","image":"https://www.lvbibir.cn/images/cover-ambari.png","datePublished":"2021-12-01T00:00:00Z","dateModified":"2024-01-27T00:00:00Z","author":{"@type":"Person","name":"lvbibir"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.lvbibir.cn/posts/tech/centos-deploy-ambari-2.7.5-and-hdp-3.1.5/"},"publisher":{"@type":"Organization","name":"lvbibir's Blog","logo":{"@type":"ImageObject","url":"https://www.lvbibir.cn/images/avatar.webp"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://www.lvbibir.cn accesskey=h title="lvbibir's Blog (Alt + H)"><img src=https://www.lvbibir.cn/images/avatar.webp alt aria-label=logo height=35>lvbibir's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li class=menu-item><a href=https://www.lvbibir.cn/ title="ğŸ¡ ä¸»é¡µ"><span>ğŸ¡ ä¸»é¡µ</span></a></li><li class=menu-item><a href=https://www.lvbibir.cn/search title="ğŸ” æœç´¢ (Alt + /)" accesskey=/><span>ğŸ” æœç´¢</span></a></li><li class=menu-item><a href=https://www.lvbibir.cn/posts title="ğŸ“š æ–‡ç« "><span>ğŸ“š æ–‡ç« </span></a></li><li class=menu-item><a href=https://www.lvbibir.cn/archives title="ğŸ“ˆ å½’æ¡£"><span>ğŸ“ˆ å½’æ¡£</span></a></li><li class=menu-item><a href=https://www.lvbibir.cn/talk title="ğŸ’¬ è¯´è¯´"><span>ğŸ’¬ è¯´è¯´</span></a></li><li class=menu-item><a href=https://www.lvbibir.cn/links title="ğŸ¤ å‹é“¾"><span>ğŸ¤ å‹é“¾</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://www.lvbibir.cn>ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://www.lvbibir.cn/posts/>ğŸ“š æ–‡ç« </a>&nbsp;Â»&nbsp;<a href=https://www.lvbibir.cn/posts/tech/>ğŸ‘¨ğŸ»â€ğŸ’» æŠ€æœ¯</a></div><h1 class=post-title>éƒ¨ç½² Ambari 2.7.5 + HDP 3.1.5</h1><div class=post-description>è®°å½•é€šè¿‡ Ambari éƒ¨ç½² hadoop é›†ç¾¤çš„è¿‡ç¨‹</div><div class=post-meta>åˆ›å»º:&nbsp;<span title='2021-12-01 00:00:00 +0000 UTC'>2021-12-01</span>&nbsp;|&nbsp;æ›´æ–°:&nbsp;2024-01-27&nbsp;|&nbsp;å­—æ•°:&nbsp;2644å­—&nbsp;|&nbsp;ä½œè€…:&nbsp;lvbibir
|&nbsp;æ ‡ç­¾:&nbsp;<ul class=post-tags-meta><a href=https://www.lvbibir.cn/tags/linux/>linux</a></ul><span id=busuanzi_container_page_pv>&nbsp;|&nbsp;è®¿é—®:&nbsp;<span id=busuanzi_page_pv></span></span></div></header><button id=toc-toggle-btn class=toc-toggle-btn aria-label="Toggle Table of Contents" title=æ–‡ç« ç›®å½•><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"/></svg></button><div id=toc-overlay class=toc-overlay></div><aside id=toc-container class="toc-container wide"><button id=toc-close-btn class=toc-close-btn aria-label="Close Table of Contents"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>æ–‡ç« ç›®å½•</span></summary><div class=inner><ul><li><a href=#0-%e5%89%8d%e8%a8%80 aria-label="0 å‰è¨€">0 å‰è¨€</a></li><li><a href=#1-%e5%89%8d%e6%9c%9f%e5%87%86%e5%a4%87 aria-label="1 å‰æœŸå‡†å¤‡">1 å‰æœŸå‡†å¤‡</a><ul><li><a href=#11-%e5%ae%89%e8%a3%85%e5%8c%85%e5%87%86%e5%a4%87 aria-label="1.1 å®‰è£…åŒ…å‡†å¤‡">1.1 å®‰è£…åŒ…å‡†å¤‡</a></li><li><a href=#12-%e6%9c%8d%e5%8a%a1%e5%99%a8%e9%85%8d%e7%bd%ae aria-label="1.2 æœåŠ¡å™¨é…ç½®">1.2 æœåŠ¡å™¨é…ç½®</a></li><li><a href=#13-%e4%bf%ae%e6%94%b9%e7%b3%bb%e7%bb%9f%e7%89%88%e6%9c%ac%e6%96%87%e4%bb%b6-allnode aria-label="1.3 ä¿®æ”¹ç³»ç»Ÿç‰ˆæœ¬æ–‡ä»¶ (allnode)">1.3 ä¿®æ”¹ç³»ç»Ÿç‰ˆæœ¬æ–‡ä»¶ (allnode)</a></li><li><a href=#14-%e9%85%8d%e7%bd%ae%e4%b8%bb%e6%9c%ba%e5%90%8d-allnode aria-label="1.4 é…ç½®ä¸»æœºå (allnode)">1.4 é…ç½®ä¸»æœºå (allnode)</a></li><li><a href=#15-%e5%85%b3%e9%97%ad%e9%98%b2%e7%81%ab%e5%a2%99%e5%8f%8a-selinux-allnode aria-label="1.5 å…³é—­é˜²ç«å¢™åŠ selinux (allnode)">1.5 å…³é—­é˜²ç«å¢™åŠ selinux (allnode)</a></li><li><a href=#16-%e9%85%8d%e7%bd%ae-ssh-%e4%ba%92%e4%bf%a1-allnode aria-label="1.6 é…ç½® ssh äº’ä¿¡ (allnode)">1.6 é…ç½® ssh äº’ä¿¡ (allnode)</a></li><li><a href=#17-%e9%85%8d%e7%bd%ae-ntp-%e6%97%b6%e9%92%9f%e5%90%8c%e6%ad%a5 aria-label="1.7 é…ç½® ntp æ—¶é’ŸåŒæ­¥">1.7 é…ç½® ntp æ—¶é’ŸåŒæ­¥</a></li><li><a href=#18-%e8%ae%be%e7%bd%ae-swapallnode aria-label="1.8 è®¾ç½® swap(allnode)">1.8 è®¾ç½® swap(allnode)</a></li><li><a href=#19-%e5%85%b3%e9%97%ad%e9%80%8f%e6%98%8e%e5%a4%a7%e9%a1%b5%e9%9d%a2-allnode aria-label="1.9 å…³é—­é€æ˜å¤§é¡µé¢ (allnode)">1.9 å…³é—­é€æ˜å¤§é¡µé¢ (allnode)</a></li><li><a href=#110-%e5%ae%89%e8%a3%85-http-%e6%9c%8d%e5%8a%a1-node001 aria-label="1.10 å®‰è£… http æœåŠ¡ (node001)">1.10 å®‰è£… http æœåŠ¡ (node001)</a></li><li><a href=#111-%e5%ae%89%e8%a3%85-javaallnode aria-label="1.11 å®‰è£… Java(allnode)">1.11 å®‰è£… Java(allnode)</a></li><li><a href=#112-%e5%ae%89%e8%a3%85-maven36node001 aria-label="1.12 å®‰è£… maven3.6(node001)">1.12 å®‰è£… maven3.6(node001)</a></li></ul></li><li><a href=#2-%e5%ae%89%e8%a3%85-ambari--hdp aria-label="2 å®‰è£… Ambari &amp;amp; HDP">2 å®‰è£… Ambari & HDP</a><ul><li><a href=#21-%e9%85%8d%e7%bd%ae%e6%9c%ac%e5%9c%b0%e6%ba%90 aria-label="2.1 é…ç½®æœ¬åœ°æº">2.1 é…ç½®æœ¬åœ°æº</a></li><li><a href=#22-%e5%ae%89%e8%a3%85-mariadbnode001 aria-label="2.2 å®‰è£… mariadb(node001)">2.2 å®‰è£… mariadb(node001)</a></li><li><a href=#23-%e5%ae%89%e8%a3%85%e5%92%8c%e9%85%8d%e7%bd%ae-ambari-server-node001 aria-label="2.3 å®‰è£…å’Œé…ç½® ambari-server (node001)">2.3 å®‰è£…å’Œé…ç½® ambari-server (node001)</a></li><li><a href=#24-%e5%ae%89%e8%a3%85-ambari-agentallnode aria-label="2.4 å®‰è£… ambari-agent(allnode)">2.4 å®‰è£… ambari-agent(allnode)</a></li><li><a href=#25-%e5%ae%89%e8%a3%85-libtirpc-develallnode aria-label="2.5 å®‰è£… libtirpc-devel(allnode)">2.5 å®‰è£… libtirpc-devel(allnode)</a></li><li><a href=#26-%e5%90%af%e5%8a%a8-ambari-%e6%9c%8d%e5%8a%a1 aria-label="2.6 å¯åŠ¨ ambari æœåŠ¡">2.6 å¯åŠ¨ ambari æœåŠ¡</a></li></ul></li><li><a href=#3-%e9%83%a8%e7%bd%b2%e9%9b%86%e7%be%a4 aria-label="3 éƒ¨ç½²é›†ç¾¤">3 éƒ¨ç½²é›†ç¾¤</a><ul><li><a href=#31-%e7%99%bb%e5%bd%95%e7%95%8c%e9%9d%a2 aria-label="3.1 ç™»å½•ç•Œé¢">3.1 ç™»å½•ç•Œé¢</a></li><li><a href=#32-%e9%80%89%e6%8b%a9%e7%89%88%e6%9c%ac%e9%85%8d%e7%bd%ae-yum-%e6%ba%90 aria-label="3.2 é€‰æ‹©ç‰ˆæœ¬ï¼Œé…ç½® yum æº">3.2 é€‰æ‹©ç‰ˆæœ¬ï¼Œé…ç½® yum æº</a></li><li><a href=#33-%e9%85%8d%e7%bd%ae%e8%8a%82%e7%82%b9%e5%92%8c%e5%af%86%e9%92%a5 aria-label="3.3 é…ç½®èŠ‚ç‚¹å’Œå¯†é’¥">3.3 é…ç½®èŠ‚ç‚¹å’Œå¯†é’¥</a></li><li><a href=#34-%e5%8b%be%e9%80%89%e9%9c%80%e8%a6%81%e5%ae%89%e8%a3%85%e7%9a%84%e6%9c%8d%e5%8a%a1 aria-label="3.4 å‹¾é€‰éœ€è¦å®‰è£…çš„æœåŠ¡">3.4 å‹¾é€‰éœ€è¦å®‰è£…çš„æœåŠ¡</a></li><li><a href=#35-%e5%88%86%e9%85%8d%e6%9c%8d%e5%8a%a1-master aria-label="3.5 åˆ†é…æœåŠ¡ master">3.5 åˆ†é…æœåŠ¡ master</a></li><li><a href=#36-%e5%88%86%e9%85%8d%e6%9c%8d%e5%8a%a1-slaves aria-label="3.6 åˆ†é…æœåŠ¡ slaves">3.6 åˆ†é…æœåŠ¡ slaves</a></li><li><a href=#37-%e8%bf%9e%e6%8e%a5%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label="3.7 è¿æ¥æ•°æ®åº“">3.7 è¿æ¥æ•°æ®åº“</a></li><li><a href=#38-%e7%bc%96%e8%be%91%e9%85%8d%e7%bd%ae%e9%bb%98%e8%ae%a4%e5%8d%b3%e5%8f%af aria-label="3.8 ç¼–è¾‘é…ç½®ï¼Œé»˜è®¤å³å¯">3.8 ç¼–è¾‘é…ç½®ï¼Œé»˜è®¤å³å¯</a></li><li><a href=#39-%e5%bc%80%e5%a7%8b%e9%83%a8%e7%bd%b2 aria-label="3.9 å¼€å§‹éƒ¨ç½²">3.9 å¼€å§‹éƒ¨ç½²</a></li><li><a href=#310-%e5%ae%89%e8%a3%85%e6%88%90%e5%8a%9f aria-label="3.10 å®‰è£…æˆåŠŸ">3.10 å®‰è£…æˆåŠŸ</a></li></ul></li><li><a href=#4-%e5%85%b6%e4%bb%96 aria-label="4 å…¶ä»–">4 å…¶ä»–</a><ul><li><a href=#41-%e6%b7%bb%e5%8a%a0%e5%85%b6%e4%bb%96%e7%b3%bb%e7%bb%9f%e6%94%af%e6%8c%81 aria-label="4.1 æ·»åŠ å…¶ä»–ç³»ç»Ÿæ”¯æŒ">4.1 æ·»åŠ å…¶ä»–ç³»ç»Ÿæ”¯æŒ</a></li><li><a href=#42-yarn-registry-dns-%e6%9c%8d%e5%8a%a1%e5%90%af%e5%8a%a8%e5%a4%b1%e8%b4%a5 aria-label="4.2 YARN Registry DNS æœåŠ¡å¯åŠ¨å¤±è´¥">4.2 YARN Registry DNS æœåŠ¡å¯åŠ¨å¤±è´¥</a></li><li><a href=#43-%e8%ae%be%e7%bd%ae%e5%88%9d%e5%a7%8b%e6%a3%80%e6%b5%8b%e7%9a%84%e7%b3%bb%e7%bb%9f%e7%89%88%e6%9c%ac aria-label="4.3 è®¾ç½®åˆå§‹æ£€æµ‹çš„ç³»ç»Ÿç‰ˆæœ¬">4.3 è®¾ç½®åˆå§‹æ£€æµ‹çš„ç³»ç»Ÿç‰ˆæœ¬</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;const tocContainer=document.getElementById("toc-container"),tocToggleBtn=document.getElementById("toc-toggle-btn"),tocCloseBtn=document.getElementById("toc-close-btn"),tocOverlay=document.getElementById("toc-overlay");window.addEventListener('DOMContentLoaded',function(){if(checkTocPosition(),elements=document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]'),elements.length>0){activeElement=elements[0];const t=encodeURI(activeElement.getAttribute('id')).toLowerCase(),e=document.querySelector(`.inner ul li a[href="#${t}"]`);e&&e.classList.add('active')}},!1),window.addEventListener('resize',function(){checkTocPosition()},!1),window.addEventListener('scroll',()=>{if(!elements||elements.length===0)return;activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(t=>{const n=encodeURI(t.getAttribute('id')).toLowerCase(),e=document.querySelector(`.inner ul li a[href="#${n}"]`);e&&(t===activeElement?e.classList.add('active'):e.classList.remove('active'))})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue('--gap'),10);let isWideMode=!1,isTocVisible=!0;function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?(isWideMode=!0,isTocVisible?(tocContainer.classList.add("wide"),tocContainer.classList.remove("collapsed"),tocContainer.classList.remove("mobile-popup"),tocToggleBtn.classList.add("active")):(tocContainer.classList.remove("wide"),tocContainer.classList.add("collapsed"),tocContainer.classList.remove("mobile-popup"),tocToggleBtn.classList.remove("active")),closeTocPopup()):(isWideMode=!1,tocContainer.classList.remove("wide"),tocContainer.classList.contains("mobile-popup")||tocContainer.classList.add("collapsed"),tocContainer.classList.contains("active")?tocToggleBtn.classList.add("active"):tocToggleBtn.classList.remove("active"))}function openTocPopup(){tocContainer.classList.remove("collapsed"),tocContainer.classList.add("mobile-popup"),tocContainer.classList.add("active"),tocOverlay.classList.add("active"),tocToggleBtn.classList.add("active"),document.body.style.overflow="hidden"}function closeTocPopup(){tocContainer.classList.remove("active"),tocOverlay.classList.remove("active"),document.body.style.overflow="",setTimeout(()=>{tocContainer.classList.contains("active")||(tocContainer.classList.remove("mobile-popup"),(!isWideMode||!isTocVisible)&&tocContainer.classList.add("collapsed"))},300)}function toggleToc(){isWideMode?(isTocVisible=!isTocVisible,isTocVisible?(tocContainer.classList.add("wide"),tocContainer.classList.remove("collapsed"),tocToggleBtn.classList.add("active")):(tocContainer.classList.remove("wide"),tocContainer.classList.add("collapsed"),tocToggleBtn.classList.remove("active"))):tocContainer.classList.contains("active")?(closeTocPopup(),tocToggleBtn.classList.remove("active")):openTocPopup()}tocToggleBtn.addEventListener('click',function(){toggleToc()}),tocCloseBtn.addEventListener('click',function(){closeTocPopup(),tocToggleBtn.classList.remove("active")}),tocOverlay.addEventListener('click',function(){closeTocPopup(),tocToggleBtn.classList.remove("active")}),tocContainer.querySelectorAll('.inner a').forEach(function(e){e.addEventListener('click',function(){tocContainer.classList.contains("mobile-popup")&&(closeTocPopup(),tocToggleBtn.classList.remove("active"))})}),document.addEventListener('keydown',function(e){e.key==='Escape'&&tocContainer.classList.contains("active")&&(closeTocPopup(),tocToggleBtn.classList.remove("active"))});function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=0-å‰è¨€>0 å‰è¨€<a hidden class=anchor aria-hidden=true href=#0-å‰è¨€>#</a></h1><p>åŸºäº isoft-serveros-v4.2</p><p>æœ¬æ–‡å‚è€ƒä»¥ä¸‹é“¾æ¥:</p><ul><li><a href=https://blog.csdn.net/qq_36048223/article/details/116113987 target=_blank rel=noopener style=color:#42b983 ;>å®‰è£…Ambari 2.7.5 + HDP3.1.5ï¼ˆé™„å®‰è£…åŒ…ï¼‰</a></li></ul><h1 id=1-å‰æœŸå‡†å¤‡>1 å‰æœŸå‡†å¤‡<a hidden class=anchor aria-hidden=true href=#1-å‰æœŸå‡†å¤‡>#</a></h1><h2 id=11-å®‰è£…åŒ…å‡†å¤‡>1.1 å®‰è£…åŒ…å‡†å¤‡<a hidden class=anchor aria-hidden=true href=#11-å®‰è£…åŒ…å‡†å¤‡>#</a></h2><p>Ambari-2.7.5 HDP-3.1.5 libtirpc-devel:</p><p>é“¾æ¥ï¼š<a href=https://pan.baidu.com/s/1eteZ2jGkSq4Pz5YFfHyJgQ target=_blank rel=noopener style=color:#42b983 ;>https://pan.baidu.com/s/1eteZ2jGkSq4Pz5YFfHyJgQ</a></p><p>æå–ç ï¼š6hq3</p><h2 id=12-æœåŠ¡å™¨é…ç½®>1.2 æœåŠ¡å™¨é…ç½®<a hidden class=anchor aria-hidden=true href=#12-æœåŠ¡å™¨é…ç½®>#</a></h2><table><thead><tr><th>ä¸»æœºå</th><th>cpu</th><th>å†…å­˜</th><th>ç¡¬ç›˜</th><th>ç³»ç»Ÿç‰ˆæœ¬</th><th>ip åœ°å€</th></tr></thead><tbody><tr><td>node001</td><td>4c</td><td>10g</td><td>50g</td><td>isoft-serveros-4.2</td><td>192.168.150.106</td></tr><tr><td>node002</td><td>2c</td><td>4g</td><td>20g</td><td>isoft-serveros-4.2</td><td>192.168.150.107</td></tr></tbody></table><h2 id=13-ä¿®æ”¹ç³»ç»Ÿç‰ˆæœ¬æ–‡ä»¶-allnode>1.3 ä¿®æ”¹ç³»ç»Ÿç‰ˆæœ¬æ–‡ä»¶ (allnode)<a hidden class=anchor aria-hidden=true href=#13-ä¿®æ”¹ç³»ç»Ÿç‰ˆæœ¬æ–‡ä»¶-allnode>#</a></h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>sed -i &#39;s/4/7/g&#39; /etc/redhat-release
</span></span><span style=display:flex><span>sed -i &#39;s/4/7/g&#39; /etc/os-release
</span></span></code></pre></div><h2 id=14-é…ç½®ä¸»æœºå-allnode>1.4 é…ç½®ä¸»æœºå (allnode)<a hidden class=anchor aria-hidden=true href=#14-é…ç½®ä¸»æœºå-allnode>#</a></h2><p>2 å°æœåŠ¡å™¨çš„ hosts éƒ½éœ€è¦åšå¦‚ä¸‹ä¿®æ”¹</p><ul><li>ä¿®æ”¹ä¸»æœºå</li></ul><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>hostnamectl set-hostname node001
</span></span><span style=display:flex><span>bash
</span></span></code></pre></div><ul><li>ä¿®æ”¹ hosts æ–‡ä»¶</li></ul><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/hosts
</span></span><span style=display:flex><span>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
</span></span><span style=display:flex><span>::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
</span></span><span style=display:flex><span>192.168.150.106 node001
</span></span><span style=display:flex><span>192.168.150.107 node002
</span></span></code></pre></div><h2 id=15-å…³é—­é˜²ç«å¢™åŠ-selinux-allnode>1.5 å…³é—­é˜²ç«å¢™åŠ selinux (allnode)<a hidden class=anchor aria-hidden=true href=#15-å…³é—­é˜²ç«å¢™åŠ-selinux-allnode>#</a></h2><p><strong>2 å°æœåŠ¡å™¨ä¸Šåˆ†åˆ«æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œå…³é—­é˜²ç«å¢™å¹¶é…ç½®å¼€æœºä¸è‡ªåŠ¨å¯åŠ¨</strong></p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl stop firewalld
</span></span><span style=display:flex><span>systemctl disable firewalld
</span></span><span style=display:flex><span>setenforce <span style=color:#f99b15>0</span>
</span></span></code></pre></div><p>ä¸ºäº†é‡å¯åä¾ç„¶å…³é—­ï¼Œé…ç½®å¦‚ä¸‹æ–‡ä»¶</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/sysconfig/selinux
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#776e71># ä¿®æ”¹</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>SELINUX</span><span style=color:#5bc4bf>=</span>disabled
</span></span></code></pre></div><h2 id=16-é…ç½®-ssh-äº’ä¿¡-allnode>1.6 é…ç½® ssh äº’ä¿¡ (allnode)<a hidden class=anchor aria-hidden=true href=#16-é…ç½®-ssh-äº’ä¿¡-allnode>#</a></h2><p><strong>æ–¹æ³•ä¸€</strong></p><p>åœ¨æ¯å°æœåŠ¡å™¨ä¸Šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼Œä¸€ç›´å›è½¦å³å¯</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh-keygen -t rsa
</span></span><span style=display:flex><span>ssh-copy-id -i /root/.ssh/id_rsa.pub node001
</span></span><span style=display:flex><span>ssh-copy-id -i /root/.ssh/id_rsa.pub node002
</span></span></code></pre></div><p><strong>æ–¹æ³•äºŒ</strong></p><p>åœ¨æ¯å°æœåŠ¡å™¨ä¸Šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼Œä¸€ç›´å›è½¦å³å¯</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh-keygen -t rsa
</span></span></code></pre></div><p>åœ¨æœåŠ¡å™¨ 1 ä¸Šå°†å…¬é’¥ï¼ˆåä¸º id_rsa.pub æ–‡ä»¶ï¼‰è¿½åŠ åˆ°è®¤è¯æ–‡ä»¶ï¼ˆåä¸º authorized_keys æ–‡ä»¶ï¼‰ä¸­:</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys 
</span></span></code></pre></div><p>å»å…¶ä»–æœåŠ¡å™¨èŠ‚ç‚¹å°† <code>~/.ssh/id_rsa.pub</code> ä¸­çš„å†…å®¹æ‹·è´åˆ°æœåŠ¡å™¨ 1 çš„ <code>~/.ssh/authorized_keys</code> ä¸­,æŸ¥çœ‹æ–‡ä»¶ä¸­çš„å†…å®¹</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat ~/.ssh/authorized_keys
</span></span><span style=display:flex><span>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC/eA09X4s5RIYvuYNxVvtOo6unY1mgipsFyoz/hy/Gwk0onfZvBi/Sl3TVRZO5aqcHccAGlLF7OPTKH1qUuKVtnUOQik0TouL5VKsOBDMHHRT9D5UwqaIE8tYDC8V6uwieFgscZcBjhrsJ/Iramo9ce7N9RTO3otRMRQxOs+Wd1F/ZOmpRtMGU2N4RH4i2quRU6m2lt/eJKpNupSHKoztTQRsEanilHVASnikAXH8JpG70iO7RXR/hLz+/Of3ISUrOMSO4/ZIIu4xnYN3jvsXOdK/qIhP/PI2s+uF22IvVE6xZYVadQFa4zAuhQmCBWkE7vMyI1UJkxP7OQYj72LUH root@node001
</span></span><span style=display:flex><span>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCnz8wHoytR2Xlnl04rQq4I2vgUVWbkKjv30pj+Toz4719ah4cY9pvZj0JsfhVzaaCsR14BLFVLkqKUhCWK3K6muT4iHb+N0WirpbwfJkztmQeco7Ha9xrPQ8v/I4xZujFoMVA0tkb/32zRTxOkPv9AUgB8V6Lin6LnB/AcnhnmoIs5PdbAdh/kBGpQGKIZkbyCUOYz9/PZuGJoJBblqfWiqzxYYLN9+cYMkmPnB1HdDewAepIsIC18U3ujE+1Su2UlmISPvvr1zG4XR4ZZoKQsOOJq3XRMGVkDvmFhl03JHZpd6BW0796CeYVZ41UomWXTOduQql+tYWUbegzGLmRZ root@node002
</span></span><span style=display:flex><span>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC8AFoGJHp2M45xLYNzXUHLWzRwHsgRPHjeErStq0tEy9bQv4OkN41j0FrxVAYJiGHdHGturriVgUEtL59RjcrJH6bAvhP54nM5YiQlNnWnSUR27Zuaodz4nhYUFq/Co5eDN6lTfL8pgYiEdpBOvE5t1w3bisdblP7YGQ2lF1zzCEGfQ79QbntEbyGNoR9sGHm11x9fOH+fape8TjQJrEAO4d1tAhMqVygQKwqwAPKeqhEum6BaLli83TsXzd7gyz9H7AAc1m04NaLB26xfynW6MVuk1j94awXKlGXjrbNTC/Kg6M8bd5PT/k3DOkx4b+nEs8xZ5x1j4D2OaO1X6rZx root@node003
</span></span></code></pre></div><p>è®¾ç½®è®¤è¯æ–‡ä»¶çš„æƒé™ï¼š</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chmod <span style=color:#f99b15>600</span> ~/.ssh/authorized_keys
</span></span></code></pre></div><p>å°† <code>~/.ssh/authorized_keys</code> åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp ~/.ssh/authorized_keys node002:~/.ssh/authorized_keys
</span></span></code></pre></div><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œç¬¬ä¸€æ¬¡ä½¿ç”¨åŒæ­¥è¿˜éœ€è¦å¯†ç ï¼Œä¹‹åå°±ä¸éœ€è¦äº†</p></blockquote><p>éªŒè¯å…å¯†æ˜¯å¦é…ç½®æˆåŠŸ</p><p>ssh åˆ°ä¸åŒæœåŠ¡å™¨</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh node002
</span></span></code></pre></div><h2 id=17-é…ç½®-ntp-æ—¶é’ŸåŒæ­¥>1.7 é…ç½® ntp æ—¶é’ŸåŒæ­¥<a hidden class=anchor aria-hidden=true href=#17-é…ç½®-ntp-æ—¶é’ŸåŒæ­¥>#</a></h2><p>é€‰æ‹©ä¸€å°æœåŠ¡å™¨ä½œä¸º NTP Serverï¼Œè¿™é‡Œé€‰æ‹© node001</p><p>å°†å¦‚ä¸‹é…ç½® <code>vim /etc/ntp.conf</code></p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#776e71># Use public servers from the pool.ntp.org project.</span>
</span></span><span style=display:flex><span><span style=color:#776e71># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span>
</span></span><span style=display:flex><span>server 0.centos.pool.ntp.org iburst
</span></span><span style=display:flex><span>server 1.centos.pool.ntp.org iburst
</span></span><span style=display:flex><span>server 2.centos.pool.ntp.org iburst
</span></span><span style=display:flex><span>server 3.centos.pool.ntp.org iburst
</span></span></code></pre></div><p>ä¿®æ”¹ä¸º</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#776e71># Use public servers from the pool.ntp.org project.</span>
</span></span><span style=display:flex><span><span style=color:#776e71># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span>
</span></span><span style=display:flex><span><span style=color:#776e71>#server 0.centos.pool.ntp.org iburst</span>
</span></span><span style=display:flex><span><span style=color:#776e71>#server 1.centos.pool.ntp.org iburst</span>
</span></span><span style=display:flex><span><span style=color:#776e71>#server 2.centos.pool.ntp.org iburst</span>
</span></span><span style=display:flex><span><span style=color:#776e71>#server 3.centos.pool.ntp.org iburst</span>
</span></span><span style=display:flex><span>server 127.127.1.0 
</span></span><span style=display:flex><span>fudge 127.127.1.0 stratum <span style=color:#f99b15>10</span>
</span></span></code></pre></div><p>node002 èŠ‚ç‚¹åšå¦‚ä¸‹é…ç½®</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/ntp.conf
</span></span></code></pre></div><p>å°†</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#776e71># Use public servers from the pool.ntp.org project.</span>
</span></span><span style=display:flex><span><span style=color:#776e71># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span>
</span></span><span style=display:flex><span>server 0.centos.pool.ntp.org iburst
</span></span><span style=display:flex><span>server 1.centos.pool.ntp.org iburst
</span></span><span style=display:flex><span>server 2.centos.pool.ntp.org iburst
</span></span><span style=display:flex><span>server 3.centos.pool.ntp.org iburst
</span></span></code></pre></div><p>ä¿®æ”¹ä¸º</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#776e71># Use public servers from the pool.ntp.org project.</span>
</span></span><span style=display:flex><span><span style=color:#776e71># Please consider joining the pool (http://www.pool.ntp.org/join.html).</span>
</span></span><span style=display:flex><span><span style=color:#776e71>#server 0.centos.pool.ntp.org iburst</span>
</span></span><span style=display:flex><span><span style=color:#776e71>#server 1.centos.pool.ntp.org iburst</span>
</span></span><span style=display:flex><span><span style=color:#776e71>#server 2.centos.pool.ntp.org iburst</span>
</span></span><span style=display:flex><span><span style=color:#776e71>#server 3.centos.pool.ntp.org iburst</span>
</span></span><span style=display:flex><span>server 192.168.150.106
</span></span></code></pre></div><p>åœ¨æ¯å°æœåŠ¡å™¨ä¸Šå¯åŠ¨ ntpd æœåŠ¡ï¼Œå¹¶é…ç½®æœåŠ¡å¼€æœºè‡ªå¯åŠ¨</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl restart ntpd
</span></span><span style=display:flex><span>systemctl enable ntpd
</span></span></code></pre></div><h2 id=18-è®¾ç½®-swapallnode>1.8 è®¾ç½® swap(allnode)<a hidden class=anchor aria-hidden=true href=#18-è®¾ç½®-swapallnode>#</a></h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo vm.swappiness <span style=color:#5bc4bf>=</span> <span style=color:#f99b15>1</span> &gt;&gt; /etc/sysctl.conf
</span></span><span style=display:flex><span>sysctl vm.swappiness<span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span><span style=display:flex><span>sysctl -p
</span></span></code></pre></div><h2 id=19-å…³é—­é€æ˜å¤§é¡µé¢-allnode>1.9 å…³é—­é€æ˜å¤§é¡µé¢ (allnode)<a hidden class=anchor aria-hidden=true href=#19-å…³é—­é€æ˜å¤§é¡µé¢-allnode>#</a></h2><p>ç”±äºé€æ˜è¶…å¤§é¡µé¢å·²çŸ¥ä¼šå¯¼è‡´æ„å¤–çš„èŠ‚ç‚¹é‡æ–°å¯åŠ¨å¹¶å¯¼è‡´ RAC å‡ºç°æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤ Oracle å¼ºçƒˆå»ºè®®ç¦ç”¨</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag
</span></span><span style=display:flex><span>echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled
</span></span></code></pre></div><h2 id=110-å®‰è£…-http-æœåŠ¡-node001>1.10 å®‰è£… http æœåŠ¡ (node001)<a hidden class=anchor aria-hidden=true href=#110-å®‰è£…-http-æœåŠ¡-node001>#</a></h2><p>å®‰è£… apache çš„ httpd æœåŠ¡ä¸»è¦ç”¨äºæ­å»º OS. Ambari å’Œ hdp çš„ yum æºã€‚åœ¨é›†ç¾¤æœåŠ¡å™¨ä¸­é€‰æ‹©ä¸€å°æœåŠ¡å™¨æ¥å®‰è£… httpd æœåŠ¡ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yum -y install httpd
</span></span><span style=display:flex><span>systemctl start httpd
</span></span><span style=display:flex><span>systemctl enable httpd.service
</span></span></code></pre></div><p>éªŒè¯ï¼Œåœ¨æµè§ˆå™¨è¾“å…¥<a href=http://192.168.150.106 target=_blank rel=noopener style=color:#42b983 ;>http://192.168.150.106</a>çœ‹åˆ°å¦‚ä¸‹æˆªå›¾åˆ™è¯´æ˜å¯åŠ¨æˆåŠŸã€‚</p><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-141149.png alt=image-20211123141149628 decoding=async><noscript><img src=/images/image-20211123-141149.png alt=image-20211123141149628></noscript></p><h2 id=111-å®‰è£…-javaallnode>1.11 å®‰è£… Java(allnode)<a hidden class=anchor aria-hidden=true href=#111-å®‰è£…-javaallnode>#</a></h2><p>ä¸‹è½½åœ°å€ï¼š<a href=https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html target=_blank rel=noopener style=color:#42b983 ;>https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a></p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar -zxvf jdk-8u271-linux-x64.tar.gz 
</span></span><span style=display:flex><span>mkdir /usr/local/java
</span></span><span style=display:flex><span>mv jdk1.8.0_271/* /usr/local/java
</span></span></code></pre></div><p>é…ç½®ç¯å¢ƒå˜é‡</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /root/.bashrc
</span></span></code></pre></div><p>æ·»åŠ å¦‚ä¸‹é…ç½®</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export <span style=color:#ef6155>JAVA_HOME</span><span style=color:#5bc4bf>=</span>/usr/local/java
</span></span><span style=display:flex><span>export <span style=color:#ef6155>PATH</span><span style=color:#5bc4bf>=</span><span style=color:#ef6155>$PATH</span>:<span style=color:#ef6155>$JAVA_HOME</span>/bin
</span></span><span style=display:flex><span>export <span style=color:#ef6155>CLASSPATH</span><span style=color:#5bc4bf>=</span>.:<span style=color:#ef6155>$JAVA_HOME</span>/lib/dt.jar:<span style=color:#ef6155>$JAVA_HOME</span>/lib/tools.jar
</span></span><span style=display:flex><span>export <span style=color:#ef6155>JRE_HOME</span><span style=color:#5bc4bf>=</span><span style=color:#ef6155>$JAVA_HOME</span>/jre
</span></span></code></pre></div><p>æ¿€æ´»é…ç½®</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>source /root/.bashrc
</span></span><span style=display:flex><span>java -version
</span></span></code></pre></div><h2 id=112-å®‰è£…-maven36node001>1.12 å®‰è£… maven3.6(node001)<a hidden class=anchor aria-hidden=true href=#112-å®‰è£…-maven36node001>#</a></h2><p>ä¸‹è½½è§£å‹</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar -zxvf apache-maven-3.6.3-bin.tar.gz
</span></span><span style=display:flex><span>mkdir -p /opt/src/maven
</span></span><span style=display:flex><span>mv apache-maven-3.6.3/* /opt/src/maven
</span></span></code></pre></div><p>é…ç½® maven ç¯å¢ƒå˜é‡</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /root/.bashrc
</span></span><span style=display:flex><span><span style=color:#776e71># set maven home</span>
</span></span><span style=display:flex><span>export <span style=color:#ef6155>PATH</span><span style=color:#5bc4bf>=</span><span style=color:#ef6155>$PATH</span>:/opt/src/maven/bin
</span></span></code></pre></div><p>æ¿€æ´»</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>source /root/.bashrc
</span></span></code></pre></div><h1 id=2-å®‰è£…-ambari--hdp>2 å®‰è£… Ambari & HDP<a hidden class=anchor aria-hidden=true href=#2-å®‰è£…-ambari--hdp>#</a></h1><h2 id=21-é…ç½®æœ¬åœ°æº>2.1 é…ç½®æœ¬åœ°æº<a hidden class=anchor aria-hidden=true href=#21-é…ç½®æœ¬åœ°æº>#</a></h2><p>è§£å‹</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar -zxvf  ambari-2.7.5.0-centos7.tar.gz -C /var/www/html/
</span></span><span style=display:flex><span>tar -zxvf  HDP-3.1.5.0-centos7-rpm.tar.gz -C /var/www/html/
</span></span><span style=display:flex><span>tar -zxvf  HDP-GPL-3.1.5.0-centos7-gpl.tar.gz -C /var/www/html/
</span></span><span style=display:flex><span>tar -zxvf  HDP-UTILS-1.1.0.22-centos7.tar.gz -C /var/www/html/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ll /var/www/html/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>æ€»ç”¨é‡ <span style=color:#f99b15>0</span>
</span></span><span style=display:flex><span>drwxr-xr-x. <span style=color:#f99b15>3</span> root root  <span style=color:#f99b15>21</span> 11æœˆ <span style=color:#f99b15>23</span> 22:31 ambari
</span></span><span style=display:flex><span>drwxr-xr-x. <span style=color:#f99b15>3</span> <span style=color:#f99b15>1001</span> users <span style=color:#f99b15>21</span> 12æœˆ <span style=color:#f99b15>18</span> <span style=color:#f99b15>2019</span> HDP
</span></span><span style=display:flex><span>drwxr-xr-x. <span style=color:#f99b15>3</span> <span style=color:#f99b15>1001</span> users <span style=color:#f99b15>21</span> 12æœˆ <span style=color:#f99b15>18</span> <span style=color:#f99b15>2019</span> HDP-GPL
</span></span><span style=display:flex><span>drwxr-xr-x. <span style=color:#f99b15>3</span> <span style=color:#f99b15>1001</span> users <span style=color:#f99b15>21</span> 8æœˆ  <span style=color:#f99b15>13</span> <span style=color:#f99b15>2018</span> HDP-UTILS
</span></span></code></pre></div><p>è®¾ç½®è®¾ç½®ç”¨æˆ·ç»„å’Œæˆæƒ</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chown -R root:root /var/www/html/HDP
</span></span><span style=display:flex><span>chown -R root:root /var/www/html/HDP-GPL
</span></span><span style=display:flex><span>chown -R root:root /var/www/html/HDP-UTILS
</span></span><span style=display:flex><span>chmod -R <span style=color:#f99b15>755</span> /var/www/html/HDP
</span></span><span style=display:flex><span>chmod -R <span style=color:#f99b15>755</span> /var/www/html/HDP-GPL
</span></span><span style=display:flex><span>chmod -R <span style=color:#f99b15>755</span> /var/www/html/HDP-UTILS
</span></span></code></pre></div><p>åˆ›å»º libtirpc-devel æœ¬åœ°æº</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir /var/www/html/libtirpc
</span></span><span style=display:flex><span>mv /root/libtirpc-* /var/www/html/libtirpc/
</span></span><span style=display:flex><span>cd /var/www/html/libtirpc
</span></span><span style=display:flex><span>createrepo .
</span></span></code></pre></div><p>åˆ¶ä½œæœ¬åœ°æº</p><p>é…ç½® ambari.repo</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/yum.repos.d/ambari.repo
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>Ambari-2.7.5.0<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>name</span><span style=color:#5bc4bf>=</span>Ambari-2.7.5.0
</span></span><span style=display:flex><span><span style=color:#ef6155>baseurl</span><span style=color:#5bc4bf>=</span>http://192.168.150.106/ambari/centos7/2.7.5.0-72/
</span></span><span style=display:flex><span><span style=color:#ef6155>gpgcheck</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>0</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>enabled</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>priority</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span></code></pre></div><p>é…ç½® HDP å’Œ HDP-TILS</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/yum.repos.d/HDP.repo
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>HDP-3.1.5.0<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>name</span><span style=color:#5bc4bf>=</span>HDP Version - HDP-3.1.5.0
</span></span><span style=display:flex><span><span style=color:#ef6155>baseurl</span><span style=color:#5bc4bf>=</span>http://192.168.150.106/HDP/centos7/3.1.5.0-152/
</span></span><span style=display:flex><span><span style=color:#ef6155>gpgcheck</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>0</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>enabled</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>priority</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>HDP-UTILS-1.1.0.22<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>name</span><span style=color:#5bc4bf>=</span>HDP-UTILS Version - HDP-UTILS-1.1.0.22
</span></span><span style=display:flex><span><span style=color:#ef6155>baseurl</span><span style=color:#5bc4bf>=</span>http://192.168.150.106/HDP-UTILS/centos7/1.1.0.22/
</span></span><span style=display:flex><span><span style=color:#ef6155>gpgcheck</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>0</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>enabled</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>priority</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>HDP-GPL-3.1.5.0<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>name</span><span style=color:#5bc4bf>=</span>HDP-GPL Version - HDP-GPL-3.1.5.0
</span></span><span style=display:flex><span><span style=color:#ef6155>baseurl</span><span style=color:#5bc4bf>=</span>http://192.168.150.106/HDP-GPL/centos7/3.1.5.0-152
</span></span><span style=display:flex><span><span style=color:#ef6155>gpgcheck</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>0</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>enabled</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>priority</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span></code></pre></div><p>é…ç½® libtirpc.repo</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/yum.repos.d/libtirpc.repo
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>libtirpc_repo<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>name</span><span style=color:#5bc4bf>=</span>libtirpc-0.2.4-0.16
</span></span><span style=display:flex><span><span style=color:#ef6155>baseurl</span><span style=color:#5bc4bf>=</span>http://192.168.150.106/libtirpc/
</span></span><span style=display:flex><span><span style=color:#ef6155>gpgcheck</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>0</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>enabled</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span><span style=display:flex><span><span style=color:#ef6155>priority</span><span style=color:#5bc4bf>=</span><span style=color:#f99b15>1</span>
</span></span></code></pre></div><p>æ‹·è´åˆ°å…¶ä»–èŠ‚ç‚¹</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>scp /etc/yum.repos.d/* node002:/etc/yum.repos.d/
</span></span></code></pre></div><p>æŸ¥çœ‹æº</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yum clean all
</span></span><span style=display:flex><span>yum repolist
</span></span></code></pre></div><h2 id=22-å®‰è£…-mariadbnode001>2.2 å®‰è£… mariadb(node001)<a hidden class=anchor aria-hidden=true href=#22-å®‰è£…-mariadbnode001>#</a></h2><p>å®‰è£… MariaDB æœåŠ¡å™¨</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yum install mariadb-server -y
</span></span></code></pre></div><p>å¯åŠ¨å¹¶è®¾ç½®å¼€æœºå¯åŠ¨</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl enable mariadb
</span></span><span style=display:flex><span>systemctl start mariadb
</span></span></code></pre></div><p>åˆå§‹åŒ–</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/usr/bin/mysql_secure_installation
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>...<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span>Enter current password <span style=color:#815ba4>for</span> root <span style=color:#5bc4bf>(</span>enter <span style=color:#815ba4>for</span> none<span style=color:#5bc4bf>)</span>:
</span></span><span style=display:flex><span>OK, successfully used password, moving on...
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>...<span style=color:#5bc4bf>]</span>
</span></span><span style=display:flex><span>Set root password? <span style=color:#5bc4bf>[</span>Y/n<span style=color:#5bc4bf>]</span> Y
</span></span><span style=display:flex><span>New password:123456
</span></span><span style=display:flex><span>Re-enter new password:123456
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>...<span style=color:#5bc4bf>]</span> 
</span></span><span style=display:flex><span>Remove anonymous users? <span style=color:#5bc4bf>[</span>Y/n<span style=color:#5bc4bf>]</span> Y 
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>...<span style=color:#5bc4bf>]</span> 
</span></span><span style=display:flex><span>Disallow root login remotely? <span style=color:#5bc4bf>[</span>Y/n<span style=color:#5bc4bf>]</span> N 
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>...<span style=color:#5bc4bf>]</span> 
</span></span><span style=display:flex><span>Remove test database and access to it <span style=color:#5bc4bf>[</span>Y/n<span style=color:#5bc4bf>]</span> Y 
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>...<span style=color:#5bc4bf>]</span> 
</span></span><span style=display:flex><span>Reload privilege tables now? <span style=color:#5bc4bf>[</span>Y/n<span style=color:#5bc4bf>]</span> Y 
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>...<span style=color:#5bc4bf>]</span> 
</span></span><span style=display:flex><span>All <span style=color:#815ba4>done</span>! If you<span style=color:#ef6155>&#39;</span>ve completed all of the above steps, your MariaDB <span style=color:#f99b15>18</span> installation should now be secure. 
</span></span><span style=display:flex><span>Thanks <span style=color:#815ba4>for</span> using MariaDB!
</span></span></code></pre></div><p>ä¸º MariaDB å®‰è£… MySQL JDBC é©±åŠ¨ç¨‹åº</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar zxf mysql-connector-java-5.1.40.tar.gz
</span></span><span style=display:flex><span>mv mysql-connector-java-5.1.40/mysql-connector-java-5.1.40-bin.jar /usr/share/java/mysql-connector-java.jar
</span></span></code></pre></div><p>åˆ›å»ºéœ€è¦çš„æ•°æ®åº“</p><p>å¦‚æœéœ€è¦ rangerï¼Œç¼–è¾‘ä»¥ä¸‹â½‚ä»¶ï¼š vim /etc/my.cnf å¹¶æ·»åŠ ä»¥ä¸‹â¾ï¼š</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ef6155>log_bin_trust_function_creators</span> <span style=color:#5bc4bf>=</span> <span style=color:#f99b15>1</span>
</span></span></code></pre></div><p>é‡å¯æ•°æ®åº“å¹¶ç™»å½•</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl restart mariadb
</span></span><span style=display:flex><span>mysql -u root -p123456
</span></span></code></pre></div><h2 id=23-å®‰è£…å’Œé…ç½®-ambari-server-node001>2.3 å®‰è£…å’Œé…ç½® ambari-server (node001)<a hidden class=anchor aria-hidden=true href=#23-å®‰è£…å’Œé…ç½®-ambari-server-node001>#</a></h2><p>å®‰è£… ambari-server</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>yum -y install ambari-server
</span></span></code></pre></div><p>å¤åˆ¶ mysql jdbc é©±åŠ¨åˆ° /var/lib/ambari-server/resources/</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cp /usr/share/java/mysql-connector-java.jar /var/lib/ambari-server/resources/
</span></span></code></pre></div><p>é…ç½® /etc/ambari-server/conf/ambari.propertiesï¼Œæ·»åŠ å¦‚ä¸‹è¡Œ</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/ambari-server/conf/ambari.properties
</span></span><span style=display:flex><span>server.jdbc.driver.path<span style=color:#5bc4bf>=</span>/usr/share/java/mysql-connector-java.jar
</span></span></code></pre></div><p>æ‰§è¡Œ</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ambari-server setup --jdbc-db<span style=color:#5bc4bf>=</span>mysql --jdbc-driver<span style=color:#5bc4bf>=</span>/usr/share/java/mysql-connector-java.jar
</span></span></code></pre></div><p>åˆå§‹åŒ– ambari-server</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ambari-server setup
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>1ï¼‰ æç¤ºæ˜¯å¦è‡ªå®šä¹‰è®¾ç½®ã€‚è¾“å…¥ï¼šy
</span></span><span style=display:flex><span>Customize user account <span style=color:#815ba4>for</span> ambari-server daemon <span style=color:#5bc4bf>[</span>y/n<span style=color:#5bc4bf>]</span> <span style=color:#5bc4bf>(</span>n<span style=color:#5bc4bf>)</span>? y
</span></span><span style=display:flex><span>ï¼ˆ2ï¼‰ambari-server è´¦å·ã€‚
</span></span><span style=display:flex><span>Enter user account <span style=color:#815ba4>for</span> ambari-server daemon <span style=color:#5bc4bf>(</span>root<span style=color:#5bc4bf>)</span>:
</span></span><span style=display:flex><span>å¦‚æœç›´æ¥å›è½¦å°±æ˜¯é»˜è®¤é€‰æ‹©rootç”¨æˆ·
</span></span><span style=display:flex><span>å¦‚æœè¾“å…¥å·²ç»åˆ›å»ºçš„ç”¨æˆ·å°±ä¼šæ˜¾ç¤ºï¼š
</span></span><span style=display:flex><span>Enter user account <span style=color:#815ba4>for</span> ambari-server daemon <span style=color:#5bc4bf>(</span>root<span style=color:#5bc4bf>)</span>:ambari
</span></span><span style=display:flex><span>Adjusting ambari-server permissions and ownership...
</span></span><span style=display:flex><span>ï¼ˆ3ï¼‰è®¾ç½®JDKã€‚è¾“å…¥ï¼š2
</span></span><span style=display:flex><span>Checking JDK...
</span></span><span style=display:flex><span>Do you want to change Oracle JDK <span style=color:#5bc4bf>[</span>y/n<span style=color:#5bc4bf>]</span> <span style=color:#5bc4bf>(</span>n<span style=color:#5bc4bf>)</span>? y
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>1<span style=color:#5bc4bf>]</span> Oracle JDK 1.8 + Java Cryptography Extension <span style=color:#5bc4bf>(</span>JCE<span style=color:#5bc4bf>)</span> Policy Files <span style=color:#f99b15>8</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>2<span style=color:#5bc4bf>]</span> Custom <span style=color:#ef6155>JDK</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>==============================================================================</span>
</span></span><span style=display:flex><span>Enter choice <span style=color:#5bc4bf>(</span>1<span style=color:#5bc4bf>)</span>: <span style=color:#f99b15>2</span>
</span></span><span style=display:flex><span>å¦‚æœä¸Šé¢é€‰æ‹©3è‡ªå®šä¹‰JDK,åˆ™éœ€è¦è®¾ç½®JAVA_HOMEã€‚è¾“å…¥ï¼š/usr/local/java
</span></span><span style=display:flex><span>WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.
</span></span><span style=display:flex><span>WARNING: JCE Policy files are required <span style=color:#815ba4>for</span> configuring Kerberos security. If you plan to use Kerberos,please make sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.
</span></span><span style=display:flex><span>Path to JAVA_HOME: /usr/local/java
</span></span><span style=display:flex><span>Validating JDK on Ambari Server...done.
</span></span><span style=display:flex><span>Completing setup...
</span></span><span style=display:flex><span>ï¼ˆ4ï¼‰å®‰è£…GPLï¼Œé€‰æ‹©ï¼šy
</span></span><span style=display:flex><span>Checking GPL software agreement...
</span></span><span style=display:flex><span>GPL License <span style=color:#815ba4>for</span> LZO: https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html
</span></span><span style=display:flex><span>Enable Ambari Server to download and install GPL Licensed LZO packages <span style=color:#5bc4bf>[</span>y/n<span style=color:#5bc4bf>]</span> <span style=color:#5bc4bf>(</span>n<span style=color:#5bc4bf>)</span>? y
</span></span><span style=display:flex><span>ï¼ˆ5ï¼‰æ•°æ®åº“é…ç½®ã€‚é€‰æ‹©ï¼šy
</span></span><span style=display:flex><span>Configuring database...
</span></span><span style=display:flex><span>Enter advanced database configuration <span style=color:#5bc4bf>[</span>y/n<span style=color:#5bc4bf>]</span> <span style=color:#5bc4bf>(</span>n<span style=color:#5bc4bf>)</span>? y
</span></span><span style=display:flex><span>ï¼ˆ6ï¼‰é€‰æ‹©æ•°æ®åº“ç±»å‹ã€‚è¾“å…¥ï¼š3
</span></span><span style=display:flex><span>Configuring database...
</span></span><span style=display:flex><span><span style=color:#5bc4bf>==============================================================================</span>
</span></span><span style=display:flex><span>Choose one of the following options:
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>1<span style=color:#5bc4bf>]</span> - PostgreSQL <span style=color:#5bc4bf>(</span>Embedded<span style=color:#5bc4bf>)</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>2<span style=color:#5bc4bf>]</span> - Oracle
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>3<span style=color:#5bc4bf>]</span> - MySQL/ MariaDB
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>4<span style=color:#5bc4bf>]</span> - PostgreSQL
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>5<span style=color:#5bc4bf>]</span> - Microsoft SQL Server <span style=color:#5bc4bf>(</span>Tech Preview<span style=color:#5bc4bf>)</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>[</span>6<span style=color:#5bc4bf>]</span> - SQL <span style=color:#ef6155>Anywhere</span>
</span></span><span style=display:flex><span><span style=color:#5bc4bf>==============================================================================</span>
</span></span><span style=display:flex><span>Enter choice <span style=color:#5bc4bf>(</span>3<span style=color:#5bc4bf>)</span>: <span style=color:#f99b15>3</span>
</span></span><span style=display:flex><span>ï¼ˆ7ï¼‰è®¾ç½®æ•°æ®åº“çš„å…·ä½“é…ç½®ä¿¡æ¯ï¼Œæ ¹æ®å®é™…æƒ…å†µè¾“å…¥ï¼Œå¦‚æœå’Œæ‹¬å·å†…ç›¸åŒï¼Œåˆ™å¯ä»¥ç›´æ¥å›è½¦ã€‚å¦‚æœæƒ³é‡å‘½åï¼Œå°±è¾“å…¥ã€‚
</span></span><span style=display:flex><span>Hostname <span style=color:#5bc4bf>(</span>localhost<span style=color:#5bc4bf>)</span>:node001
</span></span><span style=display:flex><span>Port <span style=color:#5bc4bf>(</span>3306<span style=color:#5bc4bf>)</span>: <span style=color:#f99b15>3306</span>
</span></span><span style=display:flex><span>Database name <span style=color:#5bc4bf>(</span>ambari<span style=color:#5bc4bf>)</span>: ambari
</span></span><span style=display:flex><span>Username <span style=color:#5bc4bf>(</span>ambari<span style=color:#5bc4bf>)</span>: ambari
</span></span><span style=display:flex><span>Enter Database Password <span style=color:#5bc4bf>(</span>bigdata<span style=color:#5bc4bf>)</span>:ambari123
</span></span><span style=display:flex><span>Re-Enter password: ambari123
</span></span><span style=display:flex><span>ï¼ˆ8ï¼‰å°†Ambariæ•°æ®åº“è„šæœ¬å¯¼å…¥åˆ°æ•°æ®åº“
</span></span><span style=display:flex><span>WARNING: Before starting Ambari Server, you must run the following DDL against the database to create the schema: /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql è¿™ä¸ªsqlåé¢ä¼šç”¨åˆ°ï¼Œå¯¼å…¥æ•°æ®åº“
</span></span><span style=display:flex><span>Proceed with configuring remote database connection properties <span style=color:#5bc4bf>[</span>y/n<span style=color:#5bc4bf>]</span> <span style=color:#5bc4bf>(</span>y<span style=color:#5bc4bf>)</span>? y
</span></span></code></pre></div><p>ç™»å½• mariadb åˆ›å»º ambari å®‰è£…æ‰€éœ€è¦çš„åº“</p><p>è®¾ç½®çš„è´¦å·åé¢é…ç½® ambari-server çš„æ—¶å€™ä¼šç”¨åˆ°</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mysql -uroot -p123456
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CREATE DATABASE ambari; 
</span></span><span style=display:flex><span>use ambari; 
</span></span><span style=display:flex><span>CREATE USER <span style=color:#48b685>&#39;ambari&#39;</span>@<span style=color:#48b685>&#39;%&#39;</span> IDENTIFIED BY <span style=color:#48b685>&#39;ambari123&#39;</span>; 
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON *.* TO <span style=color:#48b685>&#39;ambari&#39;</span>@<span style=color:#48b685>&#39;%&#39;</span>; 
</span></span><span style=display:flex><span>CREATE USER <span style=color:#48b685>&#39;ambari&#39;</span>@<span style=color:#48b685>&#39;localhost&#39;</span> IDENTIFIED BY <span style=color:#48b685>&#39;ambari123&#39;</span>; 
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON *.* TO <span style=color:#48b685>&#39;ambari&#39;</span>@<span style=color:#48b685>&#39;localhost&#39;</span>; 
</span></span><span style=display:flex><span>CREATE USER <span style=color:#48b685>&#39;ambari&#39;</span>@<span style=color:#48b685>&#39;node001&#39;</span> IDENTIFIED BY <span style=color:#48b685>&#39;ambari123&#39;</span>; 
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON *.* TO <span style=color:#48b685>&#39;ambari&#39;</span>@<span style=color:#48b685>&#39;node001&#39;</span>; 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>source /var/lib/ambari-server/resources/Ambari-DDL-MySQL-CREATE.sql 
</span></span><span style=display:flex><span>show tables; 
</span></span><span style=display:flex><span>use mysql; 
</span></span><span style=display:flex><span><span style=color:#815ba4>select</span> host,user from user where <span style=color:#ef6155>user</span><span style=color:#5bc4bf>=</span><span style=color:#48b685>&#39;ambari&#39;</span>; 
</span></span><span style=display:flex><span>CREATE DATABASE hive; 
</span></span><span style=display:flex><span>use hive; 
</span></span><span style=display:flex><span>CREATE USER <span style=color:#48b685>&#39;hive&#39;</span>@<span style=color:#48b685>&#39;%&#39;</span> IDENTIFIED BY <span style=color:#48b685>&#39;hive&#39;</span>; 
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON *.* TO <span style=color:#48b685>&#39;hive&#39;</span>@<span style=color:#48b685>&#39;%&#39;</span>; 
</span></span><span style=display:flex><span>CREATE USER <span style=color:#48b685>&#39;hive&#39;</span>@<span style=color:#48b685>&#39;localhost&#39;</span> IDENTIFIED BY <span style=color:#48b685>&#39;hive&#39;</span>; 
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON *.* TO <span style=color:#48b685>&#39;hive&#39;</span>@<span style=color:#48b685>&#39;localhost&#39;</span>; 
</span></span><span style=display:flex><span>CREATE USER <span style=color:#48b685>&#39;hive&#39;</span>@<span style=color:#48b685>&#39;node001&#39;</span> IDENTIFIED BY <span style=color:#48b685>&#39;hive&#39;</span>; 
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON *.* TO <span style=color:#48b685>&#39;hive&#39;</span>@<span style=color:#48b685>&#39;node001&#39;</span>; 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CREATE DATABASE oozie; 
</span></span><span style=display:flex><span>use oozie; 
</span></span><span style=display:flex><span>CREATE USER <span style=color:#48b685>&#39;oozie&#39;</span>@<span style=color:#48b685>&#39;%&#39;</span> IDENTIFIED BY <span style=color:#48b685>&#39;oozie&#39;</span>; 
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON *.* TO <span style=color:#48b685>&#39;oozie&#39;</span>@<span style=color:#48b685>&#39;%&#39;</span>; 
</span></span><span style=display:flex><span>CREATE USER <span style=color:#48b685>&#39;oozie&#39;</span>@<span style=color:#48b685>&#39;localhost&#39;</span> IDENTIFIED BY <span style=color:#48b685>&#39;oozie&#39;</span>; 
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON *.* TO <span style=color:#48b685>&#39;oozie&#39;</span>@<span style=color:#48b685>&#39;localhost&#39;</span>; 
</span></span><span style=display:flex><span>CREATE USER <span style=color:#48b685>&#39;oozie&#39;</span>@<span style=color:#48b685>&#39;node001&#39;</span> IDENTIFIED BY <span style=color:#48b685>&#39;oozie&#39;</span>; 
</span></span><span style=display:flex><span>GRANT ALL PRIVILEGES ON *.* TO <span style=color:#48b685>&#39;oozie&#39;</span>@<span style=color:#48b685>&#39;node001&#39;</span>; 
</span></span><span style=display:flex><span>FLUSH PRIVILEGES;
</span></span></code></pre></div><h2 id=24-å®‰è£…-ambari-agentallnode>2.4 å®‰è£… ambari-agent(allnode)<a hidden class=anchor aria-hidden=true href=#24-å®‰è£…-ambari-agentallnode>#</a></h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pssh -h /node.list -i <span style=color:#48b685>&#39;yum -y install ambari-agent&#39;</span>
</span></span><span style=display:flex><span>pssh -h /node.list -i <span style=color:#48b685>&#39;systemctl start ambari-agent&#39;</span>
</span></span></code></pre></div><h2 id=25-å®‰è£…-libtirpc-develallnode>2.5 å®‰è£… libtirpc-devel(allnode)<a hidden class=anchor aria-hidden=true href=#25-å®‰è£…-libtirpc-develallnode>#</a></h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pssh -h /node.list -i <span style=color:#48b685>&#39;yum -y install libtirpc-devel&#39;</span>
</span></span></code></pre></div><h2 id=26-å¯åŠ¨-ambari-æœåŠ¡>2.6 å¯åŠ¨ ambari æœåŠ¡<a hidden class=anchor aria-hidden=true href=#26-å¯åŠ¨-ambari-æœåŠ¡>#</a></h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>ambari-server start
</span></span></code></pre></div><h1 id=3-éƒ¨ç½²é›†ç¾¤>3 éƒ¨ç½²é›†ç¾¤<a hidden class=anchor aria-hidden=true href=#3-éƒ¨ç½²é›†ç¾¤>#</a></h1><h2 id=31-ç™»å½•ç•Œé¢>3.1 ç™»å½•ç•Œé¢<a hidden class=anchor aria-hidden=true href=#31-ç™»å½•ç•Œé¢>#</a></h2><p><a href=http://192.168.150.106:8080 target=_blank rel=noopener style=color:#42b983 ;>http://192.168.150.106:8080</a></p><p>é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ç™»å½•ï¼Œ è´¦æˆ·ï¼šadmin å¯†ç ï¼šadmin</p><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-145726.png alt=image-20211123145726406 decoding=async><noscript><img src=/images/image-20211123-145726.png alt=image-20211123145726406></noscript></p><h2 id=32-é€‰æ‹©ç‰ˆæœ¬é…ç½®-yum-æº>3.2 é€‰æ‹©ç‰ˆæœ¬ï¼Œé…ç½® yum æº<a hidden class=anchor aria-hidden=true href=#32-é€‰æ‹©ç‰ˆæœ¬é…ç½®-yum-æº>#</a></h2><p>1ï¼‰é€‰æ‹© Launch Install Wizard</p><p>2ï¼‰é…ç½®é›†ç¾¤åç§°</p><p>3ï¼‰é€‰æ‹©ç‰ˆæœ¬å¹¶ä¿®æ”¹æœ¬åœ°æºåœ°å€</p><p>é€‰ HDP-3.1(Default Version Definition);</p><p>é€‰ Use Local Repository;</p><p>é€‰ redhat7:</p><p>HDP-3.1ï¼šhttp://node001/HDP/centos7/3.1.5.0-152/</p><p>HDP-3.1-GPL: http://node001/HDP-GPL/centos7/3.1.5.0-152/</p><p>HDP-UTILS-1.1.0.22: http://node001/HDP-UTILS/centos7/1.1.0.22/</p><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-150120.png alt=image-20211123150120718 decoding=async><noscript><img src=/images/image-20211123-150120.png alt=image-20211123150120718></noscript></p><h2 id=33-é…ç½®èŠ‚ç‚¹å’Œå¯†é’¥>3.3 é…ç½®èŠ‚ç‚¹å’Œå¯†é’¥<a hidden class=anchor aria-hidden=true href=#33-é…ç½®èŠ‚ç‚¹å’Œå¯†é’¥>#</a></h2><p>ä¸‹è½½ä¸»èŠ‚ç‚¹çš„ /root/.ssh/id_rsaï¼Œå¹¶ä¸Šä¼ ï¼ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œè¿›å…¥ç¡®è®¤ä¸»æœºç•Œé¢</p><p>ä¹Ÿå¯ç›´æ¥ cat /root/.ssh/id_rsa ç²˜è´´å³å¯</p><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-150255.png alt=image-20211123150255012 decoding=async><noscript><img src=/images/image-20211123-150255.png alt=image-20211123150255012></noscript></p><p>éªŒè¯é€šè¿‡</p><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-150337.png alt=image-20211123150337730 decoding=async><noscript><img src=/images/image-20211123-150337.png alt=image-20211123150337730></noscript></p><h2 id=34-å‹¾é€‰éœ€è¦å®‰è£…çš„æœåŠ¡>3.4 å‹¾é€‰éœ€è¦å®‰è£…çš„æœåŠ¡<a hidden class=anchor aria-hidden=true href=#34-å‹¾é€‰éœ€è¦å®‰è£…çš„æœåŠ¡>#</a></h2><p>ç”±äºèµ„æºæœ‰é™ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰é€‰æ‹©æ‰€æœ‰æœåŠ¡</p><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-151238.png alt=image-20211123151238695 decoding=async><noscript><img src=/images/image-20211123-151238.png alt=image-20211123151238695></noscript></p><h2 id=35-åˆ†é…æœåŠ¡-master>3.5 åˆ†é…æœåŠ¡ master<a hidden class=anchor aria-hidden=true href=#35-åˆ†é…æœåŠ¡-master>#</a></h2><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-151312.png alt=image-20211123151312856 decoding=async><noscript><img src=/images/image-20211123-151312.png alt=image-20211123151312856></noscript></p><h2 id=36-åˆ†é…æœåŠ¡-slaves>3.6 åˆ†é…æœåŠ¡ slaves<a hidden class=anchor aria-hidden=true href=#36-åˆ†é…æœåŠ¡-slaves>#</a></h2><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-151134.png alt=image-20211123151134172 decoding=async><noscript><img src=/images/image-20211123-151134.png alt=image-20211123151134172></noscript></p><p>è®¾ç½®ç›¸å…³æœåŠ¡çš„å¯†ç </p><p>Grafana Admin: 123456</p><p>Hive Database: hive</p><p>Activity Explorerâ€™s Admin: admin</p><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-151427.png alt=image-20211123151427030 decoding=async><noscript><img src=/images/image-20211123-151427.png alt=image-20211123151427030></noscript></p><h2 id=37-è¿æ¥æ•°æ®åº“>3.7 è¿æ¥æ•°æ®åº“<a hidden class=anchor aria-hidden=true href=#37-è¿æ¥æ•°æ®åº“>#</a></h2><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-151525.png alt=image-20211123151525068 decoding=async><noscript><img src=/images/image-20211123-151525.png alt=image-20211123151525068></noscript></p><h2 id=38-ç¼–è¾‘é…ç½®é»˜è®¤å³å¯>3.8 ç¼–è¾‘é…ç½®ï¼Œé»˜è®¤å³å¯<a hidden class=anchor aria-hidden=true href=#38-ç¼–è¾‘é…ç½®é»˜è®¤å³å¯>#</a></h2><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-151547.png alt=image-20211123151547943 decoding=async><noscript><img src=/images/image-20211123-151547.png alt=image-20211123151547943></noscript></p><h2 id=39-å¼€å§‹éƒ¨ç½²>3.9 å¼€å§‹éƒ¨ç½²<a hidden class=anchor aria-hidden=true href=#39-å¼€å§‹éƒ¨ç½²>#</a></h2><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-151705.png alt=image-20211123151705941 decoding=async><noscript><img src=/images/image-20211123-151705.png alt=image-20211123151705941></noscript></p><h2 id=310-å®‰è£…æˆåŠŸ>3.10 å®‰è£…æˆåŠŸ<a hidden class=anchor aria-hidden=true href=#310-å®‰è£…æˆåŠŸ>#</a></h2><p>å³ä¸Šè§’ä¸¤ä¸ªè­¦å‘Šæ˜¯ç£ç›˜ä½¿ç”¨ç‡è­¦å‘Šï¼Œè™šæœºåˆ†é…çš„ç£ç›˜è¾ƒå°</p><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-163439.png alt=image-20211123163439475 decoding=async><noscript><img src=/images/image-20211123-163439.png alt=image-20211123163439475></noscript></p><h1 id=4-å…¶ä»–>4 å…¶ä»–<a hidden class=anchor aria-hidden=true href=#4-å…¶ä»–>#</a></h1><h2 id=41-æ·»åŠ å…¶ä»–ç³»ç»Ÿæ”¯æŒ>4.1 æ·»åŠ å…¶ä»–ç³»ç»Ÿæ”¯æŒ<a hidden class=anchor aria-hidden=true href=#41-æ·»åŠ å…¶ä»–ç³»ç»Ÿæ”¯æŒ>#</a></h2><p>HDP é»˜è®¤ä¸æ”¯æŒå®‰è£…åˆ° isoft-serverosv4.2ï¼Œéœ€æ‰‹åŠ¨æ·»åŠ æ”¯æŒ</p><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>vim /usr/lib/ambari-server/lib/ambari_commons/resources/os_family.json
</span></span></code></pre></div><p>æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œï¼Œæ³¨æ„ç¼©è¿›å’Œé€—å·</p><p><img class=lazyload src=data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7 data-src=/images/image-20211123-145525.png alt=image-20211123145525458 decoding=async><noscript><img src=/images/image-20211123-145525.png alt=image-20211123145525458></noscript></p><h2 id=42-yarn-registry-dns-æœåŠ¡å¯åŠ¨å¤±è´¥>4.2 YARN Registry DNS æœåŠ¡å¯åŠ¨å¤±è´¥<a hidden class=anchor aria-hidden=true href=#42-yarn-registry-dns-æœåŠ¡å¯åŠ¨å¤±è´¥>#</a></h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>lsof -i:53
</span></span><span style=display:flex><span>kill -9
</span></span></code></pre></div><h2 id=43-è®¾ç½®åˆå§‹æ£€æµ‹çš„ç³»ç»Ÿç‰ˆæœ¬>4.3 è®¾ç½®åˆå§‹æ£€æµ‹çš„ç³»ç»Ÿç‰ˆæœ¬<a hidden class=anchor aria-hidden=true href=#43-è®¾ç½®åˆå§‹æ£€æµ‹çš„ç³»ç»Ÿç‰ˆæœ¬>#</a></h2><div class=highlight><pre tabindex=0 style=color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>vim /etc/ambari-server/conf/ambari.properties
</span></span><span style=display:flex><span>server.os_family=redhat7
</span></span><span style=display:flex><span>server.os_type=redhat7
</span></span></code></pre></div></div><div class=post-reward><div style=padding:0;margin:0;width:100%;font-size:16px;text-align:center><div id=QR style=opacity:0><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://www.lvbibir.cn/images/blog-wechatpay.png alt=wechat_pay></a><p>å¾®ä¿¡</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://www.lvbibir.cn/images/blog-alipay.png alt=alipay></a><p>æ”¯ä»˜å®</p></div></div><button id=rewardButton onclick="var qr=document.getElementById('QR');qr.style.opacity==='0'?qr.style.opacity='1':qr.style.opacity='0'">
<span>ğŸ§§ é¼“åŠ±</span></button></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://www.lvbibir.cn/posts/tech/rpm-change-file/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>é€šè¿‡åç¼–è¯‘ä¿®æ”¹ rpm åŒ…å†…çš„æ–‡ä»¶</span></a>
<a class=next href=https://www.lvbibir.cn/posts/tech/openstack-kolla-ansible-allinone-train/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>kolla-ansible éƒ¨ç½² openstack (Train) (all-in-one)</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>ğŸ’¬è¯„è®º</span><hr></div><div id=tcomment></div><script src=/js/twikoo/1.6.44/twikoo.min.js></script><script>twikoo.init({envId:"https://www.lvbibir.cn/twikoo/",el:"#tcomment",lang:'zh-CN',path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><footer class=footer><a href=https://gohugo.io/ target=_blank><img style=display:unset src=/images/blog-hugo.svg></a>
<a href=https://github.com/adityatelange/hugo-PaperMod target=_blank><img style=display:unset src=/images/blog-papermod.svg></a>
<a href=https://cn.aliyun.com/ target=_blank><img style=display:unset src=/images/blog-aliyun.svg></a><br><span id=runtime_span></span>
<script type=text/javascript>function show_runtime(){window.setTimeout("show_runtime()",1e3);var a=new Date("7/13/2021 1:00:00"),r=new Date,c=r.getTime()-a.getTime(),l=24*60*60*1e3,o=c/l,i=Math.floor(o),e=(o-i)*24,t=Math.floor(e),n=(e-t)*60,s=Math.floor(n),d=Math.floor((n-s)*60);document.getElementById("runtime_span").innerHTML="ç½‘ç«™å·²è¿è¡Œ"+i+"å¤©"+t+"å°æ—¶"+s+"åˆ†"+d+"ç§’"}show_runtime()</script>|
<script defer src=https://www.lvbibir.cn/busuanzi/js></script>
<span id=busuanzi_container>æ€»è®¿å®¢æ•°: <span id=busuanzi_site_uv></span>
|
æ€»è®¿é—®é‡: <span id=busuanzi_site_pv></span></span><br><a href=https://beian.miit.gov.cn/ target=_blank style="border-bottom:1px solid">äº¬ICPå¤‡2021023168å·-1</a>&nbsp;
|
<span>Copyright &copy; 2020-2026
<a href=https://www.lvbibir.cn style="border-bottom:1px solid">lvbibir's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg><span id=read_progress></span></span></a>
<script>document.addEventListener('scroll',function(){const e=document.getElementById("read_progress"),t=document.documentElement.scrollHeight,n=document.documentElement.clientHeight,s=document.documentElement.scrollTop||document.body.scrollTop;e.innerText=((s/(t-n)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(s=>{const n=s.parentNode.parentNode,e=document.createElement('button');e.classList.add('copy-code'),e.innerText='ğŸ“„å¤åˆ¶';function l(){e.innerText='ğŸ‘ŒğŸ»å·²å¤åˆ¶!',setTimeout(()=>{e.innerText='ğŸ“„å¤åˆ¶'},2e3)}e.addEventListener('click',n=>{const e=document.createRange();e.selectNodeContents(s);const t=window.getSelection();t.removeAllRanges(),t.addRange(e);try{document.execCommand('copy'),l()}catch(e){}t.removeRange(e)});let c=s.className.replaceAll("language-",""),t=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div");o.innerText=c,t.setAttribute('class','mac-tool'),i.setAttribute('class','mac bb1'),a.setAttribute('class','mac bb2'),r.setAttribute('class','mac bb3'),o.setAttribute('class','language-type'),t.appendChild(i),t.appendChild(a),t.appendChild(r),t.appendChild(o),n.classList.contains("highlight")?(n.appendChild(e),n.appendChild(t)):n.parentNode.firstChild===n||(s.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName==="TABLE"?(s.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e),n.appendChild(t)):(s.parentNode.appendChild(e),n.appendChild(t)))})</script></body></html>